Building Test Projects
========== Starting test run ==========
[xUnit.net 00:00:00.00] xUnit.net VSTest Adapter v2.8.2+699d445a1a (64-bit .NET 9.0.7)
[xUnit.net 00:00:00.05]   Starting:    WorkflowService.Tests
dbug: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_REQUEST def=1 force=False tenant=1
info: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_SUCCESS def=1 forceTerminate=False
dbug: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_REQUEST def=1 force=False tenant=2
dbug: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_REQUEST def=1 force=True tenant=1
dbug: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_REQUEST def=1 force=False tenant=1
warn: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_BLOCKED def=1 running=1 suspended=0
info: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_FORCE_TERMINATE def=1 cancelledCount=1
info: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_SUCCESS def=1 forceTerminate=True
dbug: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_REQUEST def=1 force=True tenant=1
dbug: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_REQUEST def=1 force=True tenant=1
info: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_FORCE_TERMINATE def=1 cancelledCount=2
info: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_FORCE_TERMINATE def=1 cancelledCount=2
info: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_SUCCESS def=1 forceTerminate=True
info: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_SUCCESS def=1 forceTerminate=True
dbug: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_REQUEST def=1 force=False tenant=1
info: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_SUCCESS def=1 forceTerminate=False
dbug: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_REQUEST def=2 force=True tenant=2
dbug: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_REQUEST def=1 force=False tenant=1
warn: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_BLOCKED def=1 running=1 suspended=0
dbug: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_REQUEST def=1 force=False tenant=1
info: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_SUCCESS def=1 forceTerminate=False
dbug: WorkflowService.Services.DefinitionService[0]
      UNPUBLISH_REQUEST def=1 force=True tenant=1
[xUnit.net 00:00:00.65]     WorkflowService.Tests.Definitions.MultiTenantIsolationTests.ForceTerminate_Does_Not_Cancel_OtherTenant_Instances [FAIL]
[xUnit.net 00:00:00.65]       System.InvalidOperationException : Published workflow JSONDefinition is immutable. Create a new version.
[xUnit.net 00:00:00.65]       Stack Trace:
[xUnit.net 00:00:00.65]         C:\Users\mccre\dev\boiler\src\services\WorkflowService\Persistence\WorkflowDbContext.cs(155,0): at WorkflowService.Persistence.WorkflowDbContext.EnforceDefinitionJsonImmutability()
[xUnit.net 00:00:00.65]         C:\Users\mccre\dev\boiler\src\services\WorkflowService\Persistence\WorkflowDbContext.cs(95,0): at WorkflowService.Persistence.WorkflowDbContext.SaveChangesAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:00.65]         C:\Users\mccre\dev\boiler\tests\unit\WorkflowService.Tests\Definitions\MultiTenantIsolationTests.cs(97,0): at WorkflowService.Tests.Definitions.MultiTenantIsolationTests.ForceTerminate_Does_Not_Cancel_OtherTenant_Instances()
[xUnit.net 00:00:00.65]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.65]   Finished:    WorkflowService.Tests
========== Test run finished: 23 Tests (22 Passed, 1 Failed, 0 Skipped) run in 662 ms ==========
