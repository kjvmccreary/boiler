PS C:\Users\mccre\dev\boiler\src\frontend\react-app> npm run test -- src/tests/serviceContracts

> microservices-frontend@0.0.0 test
> vitest --config vitest.config.js src/tests/serviceContracts


 DEV  v1.6.1 C:/Users/mccre/dev/boiler/src/frontend/react-app

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:18:13)
ğŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:19:13)
ğŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
  - /api/* â†’ UserService (port 7002)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:18:13)
ğŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:19:13)
ğŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
  - /api/* â†’ UserService (port 7002)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:18:13)
ğŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:19:13)
ğŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
  - /api/* â†’ UserService (port 7002)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:18:13)
ğŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:19:13)
ğŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
  - /api/* â†’ UserService (port 7002)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:18:13)
ğŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:19:13)
ğŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
  - /api/* â†’ UserService (port 7002)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:18:13)
ğŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:19:13)
ğŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
  - /api/* â†’ UserService (port 7002)

 âœ“ |frontend| src/tests/serviceContracts/serviceUnwrap.definitions.test.ts (15)
   âœ“ Definitions service unwrap contracts (15)
     âœ“ getDefinitionsPaged
     âœ“ getDefinitions returns items array
     âœ“ getDefinition
     âœ“ createDraft
     âœ“ updateDefinition
     âœ“ publishDefinition
     âœ“ validateDefinitionJson
     âœ“ validateDefinitionById
     âœ“ createNewVersion
     âœ“ revalidateDefinition
     âœ“ archiveDefinition
     âœ“ unpublishDefinition
     âœ“ terminateDefinitionInstances
     âœ“ deleteDefinition
     âœ“ publishDefinition error unwrap
 âœ“ |frontend| src/tests/serviceContracts/serviceUnwrap.instances.test.ts (13)
   âœ“ Instances service unwrap contracts (13)
     âœ“ getInstancesPaged
     âœ“ getInstances
     âœ“ getInstance
     âœ“ getInstanceStatus
     âœ“ startInstance
     âœ“ signalInstance
     âœ“ terminateInstance
     âœ“ suspendInstance
     âœ“ resumeInstance
     âœ“ retryInstance
     âœ“ moveInstanceToNode
     âœ“ getRuntimeSnapshot
     âœ“ error path startInstance
 âœ“ |frontend| src/tests/serviceContracts/serviceUnwrap.tasks.test.ts (5)
   âœ“ Tasks service unwrap contracts (5)
     âœ“ getTask
     âœ“ getTasksPaged synthetic
     âœ“ claimTask
     âœ“ completeTask
     âœ“ assignTask
 â¯ |frontend| src/tests/serviceContracts/serviceUnwrap.errorHandling.test.ts (2)
   â¯ Service unwrap error handling (2)
     Ã— publishDefinition propagates error (success=false) (retry x1)
     âœ“ startInstance propagates error (success=false)
 âœ“ |frontend| src/tests/serviceContracts/startInstanceShape.test.ts (1)
   âœ“ startInstance unwrap (1)
     âœ“ returns flattened instance DTO (no envelope)
 âœ“ |frontend| src/tests/serviceContracts/serviceUnwrap.statusNormalization.test.ts (1)
   âœ“ Instance status normalization (1)
     âœ“ numeric status normalized to string

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯

 FAIL  |frontend| src/tests/serviceContracts/serviceUnwrap.errorHandling.test.ts > Service unwrap error handling > publishDefinition propagates error (success=false)
 FAIL  |frontend| src/tests/serviceContracts/serviceUnwrap.errorHandling.test.ts > Service unwrap error handling > publishDefinition propagates error (success=false)
AssertionError: expected [Function] to throw error matching /validation|graph invalid/i but got 'Operation failed'

- Expected:
/validation|graph invalid/i

+ Received:
"Operation failed"

 â¯ src/tests/serviceContracts/serviceUnwrap.errorHandling.test.ts:22:5
     20|     }, { status: 400 });
     21|
     22|     await expect(
       |     ^
     23|       (defs as any).publishDefinition(1, { publishNotes: 'x' })
     24|     ).rejects.toThrow(/validation|graph invalid/i);

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯

 Test Files  1 failed | 5 passed (6)
      Tests  1 failed | 36 passed (37)
   Start at  12:05:00
   Duration  1.29s (transform 151ms, setup 292ms, collect 167ms, tests 50ms, environment 405ms, prepare 84ms)
