PS C:\Users\mccre\dev\boiler\src\frontend\react-app> npm run test:workflow:all

> microservices-frontend@0.0.0 test:workflow:all
> vitest run src/features/workflow/tests --config vitest.config.js


 RUN  v1.6.1 C:/Users/mccre/dev/boiler/src/frontend/react-app

stdout | src/features/workflow/tests/dsl/dsl.core.test.ts > DSL serialize/deserialize core > deduplicates true/false branch edges per source keeping first occurrences
[DSL][serialize] edges [
  { id: 'e1', from: 'g1', to: 'a', label: 'true', fromHandle: 'true' },
  {
    id: 'e3',
    from: 'g1',
    to: 'c',
    label: 'false',
    fromHandle: 'false'
  },
  {
    id: 'e5',
    from: 'g1',
    to: 'd',
    label: 'else',
    fromHandle: undefined
  }
]

stdout | src/features/workflow/tests/dsl/dsl.core.test.ts > DSL serialize/deserialize core > round-trips nodes & edges (excluding deduped duplicates)
[DSL][serialize] edges [
  {
    id: 's_to_t',
    from: 'start',
    to: 't1',
    label: undefined,
    fromHandle: undefined
  },
  {
    id: 't_to_g',
    from: 't1',
    to: 'g1',
    label: undefined,
    fromHandle: undefined
  },
  {
    id: 'g_true',
    from: 'g1',
    to: 'h1',
    label: 'true',
    fromHandle: 'true'
  },
  {
    id: 'g_false',
    from: 'g1',
    to: 'end',
    label: 'false',
    fromHandle: 'false'
  }
]
[DSL][deserialize] edges [
  { id: 's_to_t', sourceHandle: undefined, label: undefined },
  { id: 't_to_g', sourceHandle: undefined, label: undefined },
  { id: 'g_true', sourceHandle: 'true', label: 'true' },
  { id: 'g_false', sourceHandle: 'false', label: 'false' }
]

stdout | src/features/workflow/tests/dsl/dsl.core.test.ts > DSL serialize/deserialize core > preserves arbitrary non-branch edge labels
[DSL][serialize] edges [
  {
    id: 'e1',
    from: 'n1',
    to: 'n2',
    label: 'INIT',
    fromHandle: undefined
  },
  {
    id: 'e2',
    from: 'n2',
    to: 'n3',
    label: 'FINALIZE',
    fromHandle: undefined
  }
]

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:18:13)
ðŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:19:13)
ðŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
  - /api/* â†’ UserService (port 7002)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:18:13)
ðŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:19:13)
ðŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
  - /api/* â†’ UserService (port 7002)

stderr | src/features/workflow/tests/service/workflowService.status-normalization.test.ts > WorkflowService status + error normalization > normalizes numeric task statuses in list
[MSW] Found a redundant usage of query parameters in the request handler URL for "GET /api/workflow/tasks?mine=true". Please match against a path instead and access query parameters using "new URL(request.url).searchParams" instead. Learn more: https://mswjs.io/docs/http/intercepting-requests#querysearch-parameters

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:18:13)
ðŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:19:13)
ðŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
  - /api/* â†’ UserService (port 7002)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:18:13)
ðŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:19:13)
ðŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
  - /api/* â†’ UserService (port 7002)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:18:13)
ðŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:19:13)
ðŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
  - /api/* â†’ UserService (port 7002)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:18:13)
ðŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:19:13)
ðŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
  - /api/* â†’ UserService (port 7002)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:18:13)
ðŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:19:13)
ðŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
  - /api/* â†’ UserService (port 7002)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:18:13)
ðŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:19:13)
ðŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
  - /api/* â†’ UserService (port 7002)

stdout | src/features/workflow/tests/builder/builder.serialization.test.ts > Builder Serialization (placeholder) > round-trips basic approval fixture
[DSL][serialize] edges [
  {
    id: 'e1',
    from: 'n1',
    to: 'n2',
    label: undefined,
    fromHandle: undefined
  },
  {
    id: 'e2',
    from: 'n2',
    to: 'n3',
    label: undefined,
    fromHandle: undefined
  },
  { id: 'e3', from: 'n3', to: 'n4', label: 'true', fromHandle: 'true' },
  {
    id: 'e4',
    from: 'n3',
    to: 'n5',
    label: 'false',
    fromHandle: 'false'
  }
]
[DSL][deserialize] edges [
  { id: 'e1', sourceHandle: undefined, label: undefined },
  { id: 'e2', sourceHandle: undefined, label: undefined },
  { id: 'e3', sourceHandle: 'true', label: 'true' },
  { id: 'e4', sourceHandle: 'false', label: 'false' }
]

 âœ“ |frontend| src/features/workflow/tests/dsl/dsl.core.test.ts (13)
   âœ“ DSL serialize/deserialize core (3)
     âœ“ deduplicates true/false branch edges per source keeping first occurrences
     âœ“ round-trips nodes & edges (excluding deduped duplicates)
     âœ“ preserves arbitrary non-branch edge labels
   âœ“ DSL validateDefinition invalid fixtures (6)
     âœ“ flags multiple start nodes
     âœ“ flags missing end node
     âœ“ flags unreachable nodes
     âœ“ flags edge referencing unknown node
     âœ“ flags duplicate node IDs
     âœ“ flags gateway without condition
   âœ“ DSL validateNode (4)
     âœ“ accepts timer with delaySeconds only
     âœ“ errors on timer with no delayMinutes, delaySeconds, or untilIso
     âœ“ errors on gateway without condition
     âœ“ warns on humanTask without assignee roles
 âœ“ |frontend| src/features/workflow/tests/service/workflowService.batching.test.ts (1)
   âœ“ WorkflowService / API call batching (single network per action) (1)
     âœ“ claim + complete each perform exactly one POST to their endpoints
 âœ“ |frontend| src/features/workflow/tests/service/workflowService.status-normalization.test.ts (6)
   âœ“ WorkflowService status + error normalization (6)
     âœ“ normalizes numeric instance status to enum
     âœ“ normalizes numeric task statuses in list
     âœ“ validateThenPublish short-circuits when validation fails
     âœ“ publishDefinition surfaces server error messages (array)
     âœ“ publishDefinition handles single string error shape
     âœ“ validateDefinitionJson returns success false on server 422 with errors
 âœ“ |frontend| src/features/workflow/tests/service/workflowService.multi-tenant.test.ts (1)
   âœ“ WorkflowService / Multi-Tenant Isolation (1)
     âœ“ isolates definitions and tasks between tenants
 âœ“ |frontend| src/features/workflow/tests/service/workflowService.definitions.test.ts (4)
   âœ“ WorkflowService / Definitions (4)
     âœ“ creates a draft definition
     âœ“ publishes a draft after validation passes
     âœ“ returns validation failure (simulated server invalid)
     âœ“ publishDefinition surfaces error messages
 âœ“ |frontend| src/features/workflow/tests/dsl/dsl.validation-parity.test.ts (4)
   âœ“ Validation Parity (frontend vs backend) (4)
     âœ“ frontend error set is subset of backend error set: multi-start
     âœ“ frontend error set is subset of backend error set: unreachable
     âœ“ frontend error set is subset of backend error set: missing-end
     âœ“ frontend error set is subset of backend error set: gateway-no-condition
 âœ“ |frontend| src/features/workflow/tests/service/workflowService.instances-tasks.test.ts (3)
   âœ“ WorkflowService / Instances & Tasks (3)
     âœ“ creates & publishes definition, then starts instance
     âœ“ lists tasks (mine filter)
     âœ“ gracefully handles validateDefinitionJson (happy path)
 âœ“ |frontend| src/features/workflow/tests/integration-lite/approval.happy-path.test.ts (1)
   âœ“ Workflow Integration-Lite / Approval Happy Path (1)
     âœ“ draft â†’ publish â†’ start â†’ task summary
 âœ“ |frontend| src/features/workflow/tests/integration-lite/approval.claim-complete.test.ts (1)
   âœ“ Integration-Lite / Claim & Complete Flow (1)
     âœ“ draft â†’ publish â†’ start â†’ claim â†’ complete task
 âœ“ |frontend| src/features/workflow/tests/service/workflowService.immutability.test.ts (1)
   âœ“ WorkflowService / Definition Immutability (1)
     âœ“ blocks update after publish
 â†“ |frontend| src/features/workflow/tests/operations/definitions.operations.test.tsx (1) [skipped]
   â†“ Operations / DefinitionsPage (SKIPPED) (1) [skipped]
     â†“ placeholder â€“ restore real tests after AppTestWrapper is implemented [skipped]
 âœ“ |frontend| src/features/workflow/tests/builder/builder.serialization.test.ts (1)
   âœ“ Builder Serialization (placeholder) (1)
     âœ“ round-trips basic approval fixture
 â†“ |frontend| src/features/workflow/tests/operations/tasks.operations.test.tsx (1) [skipped]
   â†“ Operations / MyTasksPage (SKIPPED) (1) [skipped]
     â†“ placeholder â€“ restore real tests after AppTestWrapper is implemented [skipped]
 â†“ |frontend| src/features/workflow/tests/operations/tenant.isolation.test.tsx (1) [skipped]
   â†“ Operations / Multi-Tenant Isolation (SKIPPED) (1) [skipped]
     â†“ placeholder â€“ will assert cache reset on tenant change [skipped]

 Test Files  11 passed | 3 skipped (14)
      Tests  36 passed | 3 skipped (39)
   Start at  16:45:43
   Duration  1.75s (transform 173ms, setup 381ms, collect 256ms, tests 170ms, environment 515ms, prepare 86ms)

PS C:\Users\mccre\dev\boiler\src\frontend\react-app>
