
 RERUN  src/contexts/TenantContext.tsx

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
ğŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
ğŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:22:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:23:13)
  - /api/* â†’ UserService (port 7002)

stdout | src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx > Two-Phase Authentication Flow > should complete Phase 1: Login without tenant context
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: false, hasRefreshToken: false, tokenExpired: 'no-token' }
ğŸ” AuthContext: No token found, user not authenticated

stdout | src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx > Two-Phase Authentication Flow > should complete Phase 1: Login without tenant context
ğŸ” AuthContext: Login response received: {
  accessToken: 'phase1-token-no-tenant',
  refreshToken: 'refresh-token',
  expiresAt: '2025-09-03T16:47:51.603Z',
  tokenType: 'Bearer',
  user: {
    id: '1',
    email: 'admin@tenant1.com',
    firstName: 'Admin',
    lastName: 'User',
    fullName: 'Admin User',
    phoneNumber: undefined,
    timeZone: 'UTC',
    language: 'en',
    lastLoginAt: undefined,
    emailConfirmed: true,
    isActive: true,
    roles: [ 'Admin' ],
    tenantId: '1',
    createdAt: '2025-09-03T15:47:51.603Z',
    updatedAt: '2025-09-03T15:47:51.603Z',
    preferences: {
      theme: 'light',
      language: 'en',
      timeZone: 'UTC',
      notifications: [Object]
    }
  },
  tenant: {
    id: '1',
    name: 'Default Tenant',
    domain: 'default.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:47:51.603Z',
    updatedAt: '2025-09-03T15:47:51.603Z'
  }
}
ğŸ” AuthContext: Extracting permissions from token: { tokenClaims: [ 'nameid', 'email' ], permissions: [] }
ğŸ” AuthContext: Extracting roles from JWT token: {
  tokenClaims: [ 'nameid', 'email' ],
  rolesRaw: [],
  rolesType: 'object'
}

stdout | src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx > Two-Phase Authentication Flow > should complete Phase 2: Tenant selection
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: false, hasRefreshToken: false, tokenExpired: 'no-token' }
ğŸ” AuthContext: No token found, user not authenticated

stdout | src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx > Two-Phase Authentication Flow > should complete Phase 2: Tenant selection
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: false, hasRefreshToken: false, tokenExpired: 'no-token' }
ğŸ” AuthContext: No token found, user not authenticated

stdout | src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx > Two-Phase Authentication Flow > should handle single tenant auto-selection
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: false, hasRefreshToken: false, tokenExpired: 'no-token' }
ğŸ” AuthContext: No token found, user not authenticated

stdout | src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx > Two-Phase Authentication Flow > should handle single tenant auto-selection
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: false, hasRefreshToken: false, tokenExpired: 'no-token' }
ğŸ” AuthContext: No token found, user not authenticated

stdout | src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx > Two-Phase Authentication Flow > should handle authentication errors
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: false, hasRefreshToken: false, tokenExpired: 'no-token' }
ğŸ” AuthContext: No token found, user not authenticated

stdout | src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx > Two-Phase Authentication Flow > should handle authentication errors
<empty line>
stderr | src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx > Two-Phase Authentication Flow > should handle authentication errors
Login failed: Error: Invalid credentials
    at C:\Users\mccre\dev\boiler\src\frontend\react-app\src\components\auth\__tests__\TwoPhaseAuthFlow.test.tsx:318:7
    at file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/@vitest/runner/dist/index.js:135:14
    at file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/@vitest/runner/dist/index.js:60:26
    at runTest (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/@vitest/runner/dist/index.js:781:17)
    at runSuite (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/@vitest/runner/dist/index.js:909:15)
    at runFiles (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/@vitest/runner/dist/index.js:958:5)
    at startTests (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/@vitest/runner/dist/index.js:967:3)
    at file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:116:7
    at withEnv (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:83:5)

stdout | src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx > Two-Phase Authentication Flow > should handle tenant loading errors
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: false, hasRefreshToken: false, tokenExpired: 'no-token' }
ğŸ” AuthContext: No token found, user not authenticated

stdout | src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx > Two-Phase Authentication Flow > should handle tenant loading errors
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: false, hasRefreshToken: false, tokenExpired: 'no-token' }
ğŸ” AuthContext: No token found, user not authenticated

stdout | src/components/auth/__tests__/TenantSelector.test.tsx > TenantSelector - Enhanced Tests > Multiple Tenants > calls onTenantSelected when tenant selected then continue clicked
ğŸ¢ TenantSelector: Tenant selected: 1

stdout | src/components/auth/__tests__/TenantSelector.test.tsx > TenantSelector - Enhanced Tests > Single Tenant Auto-Selection > invokes onTenantSelected after clicking continue
ğŸ¢ TenantSelector: Tenant selected: 1

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
ğŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
ğŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:22:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:23:13)
  - /api/* â†’ UserService (port 7002)

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > AuthProvider initialization > should initialize with default unauthenticated state
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: false, hasRefreshToken: false, tokenExpired: 'no-token' }
ğŸ” AuthContext: No token found, user not authenticated

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > AuthProvider initialization > should initialize auth when valid token exists
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: true, hasRefreshToken: true, tokenExpired: false }
ğŸ” AuthContext: Token valid, validating with backend...
ğŸ” AuthContext: Extracting permissions from token: {
  tokenClaims: [ 'email', 'roles', 'permissions' ],
  permissions: [ 'users.read' ]
}
ğŸ” AuthContext: Extracting roles from JWT token: {
  tokenClaims: [ 'email', 'roles', 'permissions' ],
  rolesRaw: [ 'User' ],
  rolesType: 'object'
}
âœ… AuthContext: Authentication initialization successful {
  user: 'test@example.com',
  permissions: [ 'users.read' ],
  roles: [ 'User' ]
}

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > AuthProvider initialization > should refresh token when existing token is expired
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: true, hasRefreshToken: true, tokenExpired: true }
ğŸ” AuthContext: Token expired, attempting refresh...
âœ… AuthContext: Token refresh successful
ğŸ” AuthContext: Extracting permissions from token: {
  tokenClaims: [ 'email', 'roles', 'permissions' ],
  permissions: [ 'users.read' ]
}
ğŸ” AuthContext: Extracting roles from JWT token: {
  tokenClaims: [ 'email', 'roles', 'permissions' ],
  rolesRaw: [ 'User' ],
  rolesType: 'object'
}

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > AuthProvider initialization > should clear auth when token refresh fails
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: true, hasRefreshToken: true, tokenExpired: true }
ğŸ” AuthContext: Token expired, attempting refresh...

stderr | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > AuthProvider initialization > should clear auth when token refresh fails
âŒ AuthContext: Token refresh failed: Error: Refresh failed
    at C:\Users\mccre\dev\boiler\src\frontend\react-app\src\contexts\__tests__\AuthContext.test.tsx:282:54
    at file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/@vitest/runner/dist/index.js:135:14
    at file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/@vitest/runner/dist/index.js:60:26
    at runTest (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/@vitest/runner/dist/index.js:781:17)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processTimers (node:internal/timers:520:9)
    at runSuite (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/@vitest/runner/dist/index.js:909:15)
    at runFiles (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/@vitest/runner/dist/index.js:958:5)

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > login functionality > should login successfully with valid credentials
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: false, hasRefreshToken: false, tokenExpired: 'no-token' }
ğŸ” AuthContext: No token found, user not authenticated

stderr | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > login functionality > should login successfully with valid credentials
The current testing environment is not configured to support act(...)

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > login functionality > should login successfully with valid credentials
ğŸ” AuthContext: Login response received: {
  accessToken: 'mock-access-token',
  refreshToken: 'mock-refresh-token',
  expiresAt: '2024-01-01T01:00:00Z',
  tokenType: 'Bearer',
  user: {
    id: '1',
    email: 'test@example.com',
    firstName: 'Test',
    lastName: 'User',
    fullName: 'Test User',
    roles: [ 'User', 'Admin' ],
    tenantId: 'tenant1',
    isActive: true,
    emailConfirmed: true,
    createdAt: '2024-01-01T00:00:00Z',
    updatedAt: '2024-01-01T00:00:00Z'
  },
  tenant: {
    id: 'tenant1',
    name: 'Test Tenant',
    isActive: true,
    createdAt: '2024-01-01T00:00:00Z',
    updatedAt: '2024-01-01T00:00:00Z'
  }
}
ğŸ” AuthContext: Extracting permissions from token: {
  tokenClaims: [ 'email', 'roles', 'permissions' ],
  permissions: [ 'users.read', 'users.write' ]
}
ğŸ” AuthContext: Extracting roles from JWT token: {
  tokenClaims: [ 'email', 'roles', 'permissions' ],
  rolesRaw: [ 'User', 'Admin' ],
  rolesType: 'object'
}

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > login functionality > should handle login failure
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: false, hasRefreshToken: false, tokenExpired: 'no-token' }
ğŸ” AuthContext: No token found, user not authenticated

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > login functionality > should set loading state during login
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: false, hasRefreshToken: false, tokenExpired: 'no-token' }
ğŸ” AuthContext: No token found, user not authenticated

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > login functionality > should set loading state during login
ğŸ” AuthContext: Login response received: {
  accessToken: 'mock-access-token',
  refreshToken: 'mock-refresh-token',
  expiresAt: '2024-01-01T01:00:00Z',
  tokenType: 'Bearer',
  user: {
    id: '1',
    email: 'test@example.com',
    firstName: 'Test',
    lastName: 'User',
    fullName: 'Test User',
    roles: [ 'User', 'Admin' ],
    tenantId: 'tenant1',
    isActive: true,
    emailConfirmed: true,
    createdAt: '2024-01-01T00:00:00Z',
    updatedAt: '2024-01-01T00:00:00Z'
  },
  tenant: {
    id: 'tenant1',
    name: 'Test Tenant',
    isActive: true,
    createdAt: '2024-01-01T00:00:00Z',
    updatedAt: '2024-01-01T00:00:00Z'
  }
}
ğŸ” AuthContext: Extracting permissions from token: {
  tokenClaims: [ 'email', 'roles', 'permissions' ],
  permissions: [ 'users.read' ]
}
ğŸ” AuthContext: Extracting roles from JWT token: {
  tokenClaims: [ 'email', 'roles', 'permissions' ],
  rolesRaw: [ 'User' ],
  rolesType: 'object'
}

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > error handling > should clear error when clearError is called
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: false, hasRefreshToken: false, tokenExpired: 'no-token' }
ğŸ” AuthContext: No token found, user not authenticated

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > role and permission extraction > should extract roles from JWT token as array
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: true, hasRefreshToken: false, tokenExpired: false }
ğŸ” AuthContext: Token valid, validating with backend...
ğŸ” AuthContext: Extracting permissions from token: {
  tokenClaims: [ 'http://schemas.microsoft.com/ws/2008/06/identity/claims/role' ],
  permissions: []
}
ğŸ” AuthContext: Extracting roles from JWT token: {
  tokenClaims: [ 'http://schemas.microsoft.com/ws/2008/06/identity/claims/role' ],
  rolesRaw: [ 'Admin', 'User' ],
  rolesType: 'object'
}
âœ… AuthContext: Authentication initialization successful {
  user: 'test@example.com',
  permissions: [],
  roles: [ 'Admin', 'User' ]
}

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > role and permission extraction > should extract roles from JWT token as comma-separated string
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: true, hasRefreshToken: false, tokenExpired: false }
ğŸ” AuthContext: Token valid, validating with backend...
ğŸ” AuthContext: Extracting permissions from token: { tokenClaims: [ 'role' ], permissions: [] }
ğŸ” AuthContext: Extracting roles from JWT token: {
  tokenClaims: [ 'role' ],
  rolesRaw: 'Admin,User,Manager',
  rolesType: 'string'
}
âœ… AuthContext: Authentication initialization successful {
  user: 'test@example.com',
  permissions: [],
  roles: [ 'Admin', 'User', 'Manager' ]
}

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > role and permission extraction > should extract permissions from JWT token
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: true, hasRefreshToken: false, tokenExpired: false }
ğŸ” AuthContext: Token valid, validating with backend...
ğŸ” AuthContext: Extracting permissions from token: {
  tokenClaims: [ 'permissions' ],
  permissions: [ 'users.read', 'users.write', 'admin.access' ]
}
ğŸ” AuthContext: Extracting roles from JWT token: { tokenClaims: [ 'permissions' ], rolesRaw: [], rolesType: 'object' }
âœ… AuthContext: Authentication initialization successful {
  user: 'test@example.com',
  permissions: [ 'users.read', 'users.write', 'admin.access' ],
  roles: []
}

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > role and permission extraction > should handle missing role claims gracefully
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: true, hasRefreshToken: false, tokenExpired: false }
ğŸ” AuthContext: Token valid, validating with backend...
ğŸ” AuthContext: Extracting permissions from token: { tokenClaims: [ 'email' ], permissions: [] }
ğŸ” AuthContext: Extracting roles from JWT token: { tokenClaims: [ 'email' ], rolesRaw: [], rolesType: 'object' }
âœ… AuthContext: Authentication initialization successful { user: 'test@example.com', permissions: [], roles: [] }

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > role and permission extraction > should handle token parsing errors
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: true, hasRefreshToken: false, tokenExpired: false }
ğŸ” AuthContext: Token valid, validating with backend...
âœ… AuthContext: Authentication initialization successful { user: 'test@example.com', permissions: [], roles: [] }

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > register functionality > should register successfully
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: false, hasRefreshToken: false, tokenExpired: 'no-token' }
ğŸ” AuthContext: No token found, user not authenticated

stderr | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > register functionality > should register successfully
The current testing environment is not configured to support act(...)

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > register functionality > should register successfully
ğŸ” AuthContext: Extracting permissions from token: {
  tokenClaims: [ 'email', 'roles', 'permissions' ],
  permissions: [ 'users.read' ]
}
ğŸ” AuthContext: Extracting roles from JWT token: {
  tokenClaims: [ 'email', 'roles', 'permissions' ],
  rolesRaw: [ 'User' ],
  rolesType: 'object'
}

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > register functionality > should handle register failure
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: false, hasRefreshToken: false, tokenExpired: 'no-token' }
ğŸ” AuthContext: No token found, user not authenticated

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > refreshAuth functionality > should refresh auth in non-test mode
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: true, hasRefreshToken: false, tokenExpired: false }
ğŸ” AuthContext: Token valid, validating with backend...
ğŸ” AuthContext: Extracting permissions from token: {
  tokenClaims: [ 'email', 'roles', 'permissions' ],
  permissions: [ 'users.read' ]
}
ğŸ” AuthContext: Extracting roles from JWT token: {
  tokenClaims: [ 'email', 'roles', 'permissions' ],
  rolesRaw: [ 'User' ],
  rolesType: 'object'
}
âœ… AuthContext: Authentication initialization successful {
  user: 'test@example.com',
  permissions: [ 'users.read' ],
  roles: [ 'User' ]
}

stderr | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > refreshAuth functionality > should refresh auth in non-test mode
The current testing environment is not configured to support act(...)

stdout | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > refreshAuth functionality > should refresh auth in non-test mode
ğŸ” AuthContext: Initializing authentication...
ğŸ” AuthContext: Token check: { hasToken: true, hasRefreshToken: false, tokenExpired: false }
ğŸ” AuthContext: Token valid, validating with backend...
ğŸ” AuthContext: Extracting permissions from token: {
  tokenClaims: [ 'email', 'roles', 'permissions' ],
  permissions: [ 'users.read' ]
}
ğŸ” AuthContext: Extracting roles from JWT token: {
  tokenClaims: [ 'email', 'roles', 'permissions' ],
  rolesRaw: [ 'User' ],
  rolesType: 'object'
}
âœ… AuthContext: Authentication initialization successful {
  user: 'test@example.com',
  permissions: [ 'users.read' ],
  roles: [ 'User' ]
}

stderr | src/contexts/__tests__/AuthContext.test.tsx > AuthContext > refreshAuth functionality > should refresh auth in non-test mode
The current testing environment is not configured to support act(...)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
ğŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
ğŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:22:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:23:13)
  - /api/* â†’ UserService (port 7002)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
ğŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
ğŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:22:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:23:13)
  - /api/* â†’ UserService (port 7002)

stdout | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > API Call Authorization > should allow API calls for users with correct permissions
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/3/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/3/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '3', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario
âœ… API RESPONSE: /api/users/3/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/3/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  }
]
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  }
]

stderr | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > API Call Authorization > should allow API calls for users with correct permissions
The current testing environment is not configured to support act(...)
The current testing environment is not configured to support act(...)
The current testing environment is not configured to support act(...)

stdout | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > API Call Authorization > should allow API calls for users with correct permissions
<empty line>
stderr | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > API Call Authorization > should allow API calls for users with correct permissions
The current testing environment is not configured to support act(...)

stdout | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > API Call Authorization > should reject API calls for users without permissions
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/6/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/6/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '6', scenario: null }
ğŸ¯ MSW: Returning error scenario

stderr | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > API Call Authorization > should reject API calls for users without permissions
ğŸš¨ API ERROR: /api/users/6/tenants 500 Request failed with status code 500
ğŸš¨ API Error Details: {
  message: 'Failed to load tenants',
  errors: [ 'Failed to load tenants' ],
  traceId: undefined
}
ğŸ¢ TenantService: API call failed: Error [ApiError]: Failed to load tenants
    at C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:72:35
    at Axios.request (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/axios/lib/core/Axios.js:40:14)
    at ApiClient.get (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:174:12)
    at TenantService.getUserTenants (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\tenant.service.ts:21:24)
    at loadUserTenants (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\contexts\TenantContext.tsx:105:24) {
  response: {
    data: {
      success: false,
      data: null,
      message: 'Failed to load tenants',
      errors: [Array]
    },
    status: 500,
    statusText: 'Internal Server Error',
    headers: Object [AxiosHeaders] {
      'content-length': '100',
      'content-type': 'application/json'
    },
    config: {
      transitional: [Object],
      adapter: [Array],
      transformRequest: [Array],
      transformResponse: [Array],
      timeout: 10000,
      xsrfCookieName: 'XSRF-TOKEN',
      xsrfHeaderName: 'X-XSRF-TOKEN',
      maxContentLength: -1,
      maxBodyLength: -1,
      env: [Object],
      validateStatus: [Function: validateStatus],
      headers: [Object [AxiosHeaders]],
      baseURL: '',
      method: 'get',
      url: '/api/users/6/tenants',
      allowAbsoluteUrls: true,
      data: undefined
    },
    request: XMLHttpRequest {
      open: [Function: open],
      setRequestHeader: [Function: setRequestHeader],
      send: [Function: send],
      abort: [Function: abort],
      getResponseHeader: [Function (anonymous)],
      getAllResponseHeaders: [Function (anonymous)],
      overrideMimeType: [Function: overrideMimeType],
      onreadystatechange: [Getter/Setter],
      readyState: 4,
      timeout: [Getter/Setter],
      withCredentials: [Getter/Setter],
      upload: XMLHttpRequestUpload {},
      responseURL: 'http://localhost:3000/api/users/6/tenants',
      status: 500,
      statusText: 'Internal Server Error',
      responseType: [Getter/Setter],
      response: [Getter],
      responseText: [Getter],
      responseXML: [Getter],
      UNSENT: 0,
      OPENED: 1,
      HEADERS_RECEIVED: 2,
      LOADING: 3,
      DONE: 4,
      [Symbol(SameObject caches)]: [Object: null prototype]
    }
  },
  status: 500,
  errors: [ 'Failed to load tenants' ]
}
The current testing environment is not configured to support act(...)
The current testing environment is not configured to support act(...)

stdout | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > API Call Authorization > should reject API calls for users without permissions
<empty line>
stderr | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > API Call Authorization > should reject API calls for users without permissions
The current testing environment is not configured to support act(...)

stdout | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > Role-Based Data Filtering > should filter user data based on role permissions
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/3/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/3/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '3', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario
âœ… API RESPONSE: /api/users/3/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/3/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  }
]
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  }
]

stdout | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > Role-Based Data Filtering > should limit data for lower privilege users
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/6/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/6/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '6', scenario: null }
ğŸ¯ MSW: Returning error scenario
ğŸ¯ MSW: Handling /api/users request { page: 1, pageSize: 10, authHeader: 'Bearer mock-viewer-token' }

stderr | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > Role-Based Data Filtering > should limit data for lower privilege users
ğŸš¨ API ERROR: /api/users/6/tenants 500 Request failed with status code 500
ğŸš¨ API Error Details: {
  message: 'Failed to load tenants',
  errors: [ 'Failed to load tenants' ],
  traceId: undefined
}
ğŸ¢ TenantService: API call failed: Error [ApiError]: Failed to load tenants
    at C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:72:35
    at Axios.request (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/axios/lib/core/Axios.js:40:14)
    at ApiClient.get (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:174:12)
    at TenantService.getUserTenants (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\tenant.service.ts:21:24)
    at loadUserTenants (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\contexts\TenantContext.tsx:105:24) {
  response: {
    data: {
      success: false,
      data: null,
      message: 'Failed to load tenants',
      errors: [Array]
    },
    status: 500,
    statusText: 'Internal Server Error',
    headers: Object [AxiosHeaders] {
      'content-length': '100',
      'content-type': 'application/json'
    },
    config: {
      transitional: [Object],
      adapter: [Array],
      transformRequest: [Array],
      transformResponse: [Array],
      timeout: 10000,
      xsrfCookieName: 'XSRF-TOKEN',
      xsrfHeaderName: 'X-XSRF-TOKEN',
      maxContentLength: -1,
      maxBodyLength: -1,
      env: [Object],
      validateStatus: [Function: validateStatus],
      headers: [Object [AxiosHeaders]],
      baseURL: '',
      method: 'get',
      url: '/api/users/6/tenants',
      allowAbsoluteUrls: true,
      data: undefined
    },
    request: XMLHttpRequest {
      open: [Function: open],
      setRequestHeader: [Function: setRequestHeader],
      send: [Function: send],
      abort: [Function: abort],
      getResponseHeader: [Function (anonymous)],
      getAllResponseHeaders: [Function (anonymous)],
      overrideMimeType: [Function: overrideMimeType],
      onreadystatechange: [Getter/Setter],
      readyState: 4,
      timeout: [Getter/Setter],
      withCredentials: [Getter/Setter],
      upload: XMLHttpRequestUpload {},
      responseURL: 'http://localhost:3000/api/users/6/tenants',
      status: 500,
      statusText: 'Internal Server Error',
      responseType: [Getter/Setter],
      response: [Getter],
      responseText: [Getter],
      responseXML: [Getter],
      UNSENT: 0,
      OPENED: 1,
      HEADERS_RECEIVED: 2,
      LOADING: 3,
      DONE: 4,
      [Symbol(SameObject caches)]: [Object: null prototype]
    }
  },
  status: 500,
  errors: [ 'Failed to load tenants' ]
}

stdout | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > Permission-Based Error Handling > should handle 403 Forbidden responses gracefully
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/5/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/5/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '5', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario
âœ… API RESPONSE: /api/users/5/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/5/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  }
]
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  }
]

stderr | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > Permission-Based Error Handling > should handle 403 Forbidden responses gracefully
The current testing environment is not configured to support act(...)
The current testing environment is not configured to support act(...)
The current testing environment is not configured to support act(...)

stdout | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > Permission-Based Error Handling > should handle 403 Forbidden responses gracefully
<empty line>
stderr | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > Permission-Based Error Handling > should handle 403 Forbidden responses gracefully
The current testing environment is not configured to support act(...)
The current testing environment is not configured to support act(...)

stdout | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > Permission-Based Error Handling > should handle successful operations for authorized users
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/3/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/3/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '3', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario
âœ… API RESPONSE: /api/users/3/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/3/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  }
]
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.399Z',
    updatedAt: '2025-09-03T15:49:26.399Z'
  }
]

stderr | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > Permission-Based Error Handling > should handle successful operations for authorized users
The current testing environment is not configured to support act(...)
The current testing environment is not configured to support act(...)
The current testing environment is not configured to support act(...)

stdout | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > Permission-Based Error Handling > should handle successful operations for authorized users
ğŸ¯ MSW: Handling DELETE /api/users/:userId request { userId: '1', authHeader: 'Bearer mock-admin-token' }

stderr | src/test/scenarios/api-permission-integration.test.tsx > API Permission Integration Scenarios > Permission-Based Error Handling > should handle successful operations for authorized users
The current testing environment is not configured to support act(...)
The current testing environment is not configured to support act(...)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
ğŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
ğŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:22:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:23:13)
  - /api/* â†’ UserService (port 7002)

stdout | src/test/scenarios/permission-component-patterns.test.tsx > RBAC Permission Component Patterns > Conditional UI Rendering > should show/hide UI elements based on user permissions
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/3/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/3/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '3', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario
âœ… API RESPONSE: /api/users/3/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/3/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]

stdout | src/test/scenarios/permission-component-patterns.test.tsx > RBAC Permission Component Patterns > Conditional UI Rendering > should show/hide UI elements based on user permissions
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/5/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/5/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '5', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario
âœ… API RESPONSE: /api/users/5/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/5/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]

stderr | src/test/scenarios/permission-component-patterns.test.tsx > RBAC Permission Component Patterns > Conditional UI Rendering > should show/hide UI elements based on user permissions
ğŸš¨ API ERROR: /api/users/6/tenants 500 Request failed with status code 500
ğŸš¨ API Error Details: {
  message: 'Failed to load tenants',
  errors: [ 'Failed to load tenants' ],
  traceId: undefined
}
ğŸ¢ TenantService: API call failed: Error [ApiError]: Failed to load tenants
    at C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:72:35
    at Axios.request (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/axios/lib/core/Axios.js:40:14)
    at ApiClient.get (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:174:12)
    at TenantService.getUserTenants (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\tenant.service.ts:21:24)
    at loadUserTenants (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\contexts\TenantContext.tsx:105:24) {
  response: {
    data: {
      success: false,
      data: null,
      message: 'Failed to load tenants',
      errors: [Array]
    },
    status: 500,
    statusText: 'Internal Server Error',
    headers: Object [AxiosHeaders] {
      'content-length': '100',
      'content-type': 'application/json'
    },
    config: {
      transitional: [Object],
      adapter: [Array],
      transformRequest: [Array],
      transformResponse: [Array],
      timeout: 10000,
      xsrfCookieName: 'XSRF-TOKEN',
      xsrfHeaderName: 'X-XSRF-TOKEN',
      maxContentLength: -1,
      maxBodyLength: -1,
      env: [Object],
      validateStatus: [Function: validateStatus],
      headers: [Object [AxiosHeaders]],
      baseURL: '',
      method: 'get',
      url: '/api/users/6/tenants',
      allowAbsoluteUrls: true,
      data: undefined
    },
    request: XMLHttpRequest {
      open: [Function: open],
      setRequestHeader: [Function: setRequestHeader],
      send: [Function: send],
      abort: [Function: abort],
      getResponseHeader: [Function (anonymous)],
      getAllResponseHeaders: [Function (anonymous)],
      overrideMimeType: [Function: overrideMimeType],
      onreadystatechange: [Getter/Setter],
      readyState: 4,
      timeout: [Getter/Setter],
      withCredentials: [Getter/Setter],
      upload: XMLHttpRequestUpload {},
      responseURL: 'http://localhost:3000/api/users/6/tenants',
      status: 500,
      statusText: 'Internal Server Error',
      responseType: [Getter/Setter],
      response: [Getter],
      responseText: [Getter],
      responseXML: [Getter],
      UNSENT: 0,
      OPENED: 1,
      HEADERS_RECEIVED: 2,
      LOADING: 3,
      DONE: 4,
      [Symbol(SameObject caches)]: [Object: null prototype]
    }
  },
  status: 500,
  errors: [ 'Failed to load tenants' ]
}

stdout | src/test/scenarios/permission-component-patterns.test.tsx > RBAC Permission Component Patterns > Conditional UI Rendering > should show/hide UI elements based on user permissions
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/6/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/6/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '6', scenario: null }
ğŸ¯ MSW: Returning error scenario

stdout | src/test/scenarios/permission-component-patterns.test.tsx > RBAC Permission Component Patterns > Form Field Permissions > should enable/disable form fields based on permissions
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/3/tenants
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/5/tenants
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/6/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/3/tenants - No token found!
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/5/tenants - No token found!
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/6/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '3', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '5', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '6', scenario: null }
ğŸ¯ MSW: Returning error scenario

stdout | src/test/scenarios/permission-component-patterns.test.tsx > RBAC Permission Component Patterns > Navigation Menu Permissions
âœ… API RESPONSE: /api/users/3/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/3/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]

stdout | src/test/scenarios/permission-component-patterns.test.tsx > RBAC Permission Component Patterns > Navigation Menu Permissions > should show navigation items based on user permissions
âœ… API RESPONSE: /api/users/5/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/5/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/3/tenants
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/5/tenants
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/6/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/3/tenants - No token found!
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/5/tenants - No token found!
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/6/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '3', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '5', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '6', scenario: null }
ğŸ¯ MSW: Returning error scenario

stderr | src/test/scenarios/permission-component-patterns.test.tsx > RBAC Permission Component Patterns > Navigation Menu Permissions > should show navigation items based on user permissions
ğŸš¨ API ERROR: /api/users/6/tenants 500 Request failed with status code 500
ğŸš¨ API Error Details: {
  message: 'Failed to load tenants',
  errors: [ 'Failed to load tenants' ],
  traceId: undefined
}
ğŸ¢ TenantService: API call failed: Error [ApiError]: Failed to load tenants
    at C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:72:35
    at Axios.request (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/axios/lib/core/Axios.js:40:14)
    at ApiClient.get (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:174:12)
    at TenantService.getUserTenants (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\tenant.service.ts:21:24)
    at loadUserTenants (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\contexts\TenantContext.tsx:105:24) {
  response: {
    data: {
      success: false,
      data: null,
      message: 'Failed to load tenants',
      errors: [Array]
    },
    status: 500,
    statusText: 'Internal Server Error',
    headers: Object [AxiosHeaders] {
      'content-length': '100',
      'content-type': 'application/json'
    },
    config: {
      transitional: [Object],
      adapter: [Array],
      transformRequest: [Array],
      transformResponse: [Array],
      timeout: 10000,
      xsrfCookieName: 'XSRF-TOKEN',
      xsrfHeaderName: 'X-XSRF-TOKEN',
      maxContentLength: -1,
      maxBodyLength: -1,
      env: [Object],
      validateStatus: [Function: validateStatus],
      headers: [Object [AxiosHeaders]],
      baseURL: '',
      method: 'get',
      url: '/api/users/6/tenants',
      allowAbsoluteUrls: true,
      data: undefined
    },
    request: XMLHttpRequest {
      open: [Function: open],
      setRequestHeader: [Function: setRequestHeader],
      send: [Function: send],
      abort: [Function: abort],
      getResponseHeader: [Function (anonymous)],
      getAllResponseHeaders: [Function (anonymous)],
      overrideMimeType: [Function: overrideMimeType],
      onreadystatechange: [Getter/Setter],
      readyState: 4,
      timeout: [Getter/Setter],
      withCredentials: [Getter/Setter],
      upload: XMLHttpRequestUpload {},
      responseURL: 'http://localhost:3000/api/users/6/tenants',
      status: 500,
      statusText: 'Internal Server Error',
      responseType: [Getter/Setter],
      response: [Getter],
      responseText: [Getter],
      responseXML: [Getter],
      UNSENT: 0,
      OPENED: 1,
      HEADERS_RECEIVED: 2,
      LOADING: 3,
      DONE: 4,
      [Symbol(SameObject caches)]: [Object: null prototype]
    }
  },
  status: 500,
  errors: [ 'Failed to load tenants' ]
}

stdout | src/test/scenarios/permission-component-patterns.test.tsx > RBAC Permission Component Patterns > Data Table Action Buttons
âœ… API RESPONSE: /api/users/3/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/3/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]

stdout | src/test/scenarios/permission-component-patterns.test.tsx > RBAC Permission Component Patterns > Data Table Action Buttons > should show/hide action buttons based on permissions
âœ… API RESPONSE: /api/users/5/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/5/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/3/tenants
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/5/tenants
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/6/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/3/tenants - No token found!
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/5/tenants - No token found!
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/6/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '3', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '5', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '6', scenario: null }
ğŸ¯ MSW: Returning error scenario

stderr | src/test/scenarios/permission-component-patterns.test.tsx > RBAC Permission Component Patterns > Data Table Action Buttons > should show/hide action buttons based on permissions
ğŸš¨ API ERROR: /api/users/6/tenants 500 Request failed with status code 500
ğŸš¨ API Error Details: {
  message: 'Failed to load tenants',
  errors: [ 'Failed to load tenants' ],
  traceId: undefined
}
ğŸ¢ TenantService: API call failed: Error [ApiError]: Failed to load tenants
    at C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:72:35
    at Axios.request (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/axios/lib/core/Axios.js:40:14)
    at ApiClient.get (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:174:12)
    at TenantService.getUserTenants (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\tenant.service.ts:21:24)
    at loadUserTenants (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\contexts\TenantContext.tsx:105:24) {
  response: {
    data: {
      success: false,
      data: null,
      message: 'Failed to load tenants',
      errors: [Array]
    },
    status: 500,
    statusText: 'Internal Server Error',
    headers: Object [AxiosHeaders] {
      'content-length': '100',
      'content-type': 'application/json'
    },
    config: {
      transitional: [Object],
      adapter: [Array],
      transformRequest: [Array],
      transformResponse: [Array],
      timeout: 10000,
      xsrfCookieName: 'XSRF-TOKEN',
      xsrfHeaderName: 'X-XSRF-TOKEN',
      maxContentLength: -1,
      maxBodyLength: -1,
      env: [Object],
      validateStatus: [Function: validateStatus],
      headers: [Object [AxiosHeaders]],
      baseURL: '',
      method: 'get',
      url: '/api/users/6/tenants',
      allowAbsoluteUrls: true,
      data: undefined
    },
    request: XMLHttpRequest {
      open: [Function: open],
      setRequestHeader: [Function: setRequestHeader],
      send: [Function: send],
      abort: [Function: abort],
      getResponseHeader: [Function (anonymous)],
      getAllResponseHeaders: [Function (anonymous)],
      overrideMimeType: [Function: overrideMimeType],
      onreadystatechange: [Getter/Setter],
      readyState: 4,
      timeout: [Getter/Setter],
      withCredentials: [Getter/Setter],
      upload: XMLHttpRequestUpload {},
      responseURL: 'http://localhost:3000/api/users/6/tenants',
      status: 500,
      statusText: 'Internal Server Error',
      responseType: [Getter/Setter],
      response: [Getter],
      responseText: [Getter],
      responseXML: [Getter],
      UNSENT: 0,
      OPENED: 1,
      HEADERS_RECEIVED: 2,
      LOADING: 3,
      DONE: 4,
      [Symbol(SameObject caches)]: [Object: null prototype]
    }
  },
  status: 500,
  errors: [ 'Failed to load tenants' ]
}

stdout | src/test/scenarios/permission-component-patterns.test.tsx > RBAC Permission Component Patterns
âœ… API RESPONSE: /api/users/3/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/3/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
âœ… API RESPONSE: /api/users/5/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/5/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]

stdout | src/test/scenarios/permission-component-patterns.test.tsx
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.816Z',
    updatedAt: '2025-09-03T15:49:26.816Z'
  }
]

stderr | src/test/scenarios/permission-component-patterns.test.tsx
ğŸš¨ API ERROR: /api/users/6/tenants 500 Request failed with status code 500
ğŸš¨ API Error Details: {
  message: 'Failed to load tenants',
  errors: [ 'Failed to load tenants' ],
  traceId: undefined
}
ğŸ¢ TenantService: API call failed: Error [ApiError]: Failed to load tenants
    at C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:72:35
    at Axios.request (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/axios/lib/core/Axios.js:40:14)
    at ApiClient.get (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:174:12)
    at TenantService.getUserTenants (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\tenant.service.ts:21:24)
    at loadUserTenants (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\contexts\TenantContext.tsx:105:24) {
  response: {
    data: {
      success: false,
      data: null,
      message: 'Failed to load tenants',
      errors: [Array]
    },
    status: 500,
    statusText: 'Internal Server Error',
    headers: Object [AxiosHeaders] {
      'content-length': '100',
      'content-type': 'application/json'
    },
    config: {
      transitional: [Object],
      adapter: [Array],
      transformRequest: [Array],
      transformResponse: [Array],
      timeout: 10000,
      xsrfCookieName: 'XSRF-TOKEN',
      xsrfHeaderName: 'X-XSRF-TOKEN',
      maxContentLength: -1,
      maxBodyLength: -1,
      env: [Object],
      validateStatus: [Function: validateStatus],
      headers: [Object [AxiosHeaders]],
      baseURL: '',
      method: 'get',
      url: '/api/users/6/tenants',
      allowAbsoluteUrls: true,
      data: undefined
    },
    request: XMLHttpRequest {
      open: [Function: open],
      setRequestHeader: [Function: setRequestHeader],
      send: [Function: send],
      abort: [Function: abort],
      getResponseHeader: [Function (anonymous)],
      getAllResponseHeaders: [Function (anonymous)],
      overrideMimeType: [Function: overrideMimeType],
      onreadystatechange: [Getter/Setter],
      readyState: 4,
      timeout: [Getter/Setter],
      withCredentials: [Getter/Setter],
      upload: XMLHttpRequestUpload {},
      responseURL: 'http://localhost:3000/api/users/6/tenants',
      status: 500,
      statusText: 'Internal Server Error',
      responseType: [Getter/Setter],
      response: [Getter],
      responseText: [Getter],
      responseXML: [Getter],
      UNSENT: 0,
      OPENED: 1,
      HEADERS_RECEIVED: 2,
      LOADING: 3,
      DONE: 4,
      [Symbol(SameObject caches)]: [Object: null prototype]
    }
  },
  status: 500,
  errors: [ 'Failed to load tenants' ]
}

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
ğŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
ğŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:22:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:23:13)
  - /api/* â†’ UserService (port 7002)

stdout | src/test/scenarios/multi-tenant-isolation.test.tsx > Multi-Tenant Permission Isolation Scenarios > Tenant Data Isolation > should isolate tenant data access
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/3/tenants
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/3/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/3/tenants - No token found!
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/3/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '3', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '3', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario

stdout | src/test/scenarios/multi-tenant-isolation.test.tsx > Multi-Tenant Permission Isolation Scenarios > Tenant Data Isolation > should prevent cross-tenant role assignment
âœ… API RESPONSE: /api/users/3/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/3/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/3/tenants
âœ… API RESPONSE: /api/users/3/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/3/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/3/tenants - No token found!
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '3', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]

stdout | src/test/scenarios/multi-tenant-isolation.test.tsx > Multi-Tenant Permission Isolation Scenarios > Tenant-Scoped Permissions
âœ… API RESPONSE: /api/users/3/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/3/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]

stdout | src/test/scenarios/multi-tenant-isolation.test.tsx > Multi-Tenant Permission Isolation Scenarios > Tenant-Scoped Permissions > should scope permissions to specific tenants
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/3/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/3/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '3', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario

stdout | src/test/scenarios/multi-tenant-isolation.test.tsx > Multi-Tenant Permission Isolation Scenarios > Tenant-Scoped Permissions > should allow system admins to access multiple tenants
âœ… API RESPONSE: /api/users/3/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/3/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/2/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/2/tenants - No token found!
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '2', scenario: null }
ğŸ¯ MSW: Returning single tenant scenario

stdout | src/test/scenarios/multi-tenant-isolation.test.tsx > Multi-Tenant Permission Isolation Scenarios > Tenant Context Switching > should handle tenant context switching for multi-tenant users
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Single Tenant',
    domain: 'single.local',
    subscriptionPlan: 'Premium',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Single Tenant',
    domain: 'single.local',
    subscriptionPlan: 'Premium',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
ğŸ¢ TenantService: Calling select-tenant API for tenant: 1
ğŸš¨ API REQUEST (NO AUTH): POST /api/auth/select-tenant - No token found!
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/2/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/2/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '2', scenario: null }
ğŸ¯ MSW: Returning single tenant scenario
ğŸ¯ MSW: Handling select-tenant request { tenantId: 1 }

stdout | src/test/scenarios/multi-tenant-isolation.test.tsx > Multi-Tenant Permission Isolation Scenarios > Tenant Context Switching > should restrict tenant switching for single-tenant users
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/3/tenants
âœ… API RESPONSE: /api/users/2/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/2/tenants : [
  {
    id: 1,
    name: 'Single Tenant',
    domain: 'single.local',
    subscriptionPlan: 'Premium',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/3/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '3', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Single Tenant',
    domain: 'single.local',
    subscriptionPlan: 'Premium',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Single Tenant',
    domain: 'single.local',
    subscriptionPlan: 'Premium',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
ğŸ¢ TenantService: Calling select-tenant API for tenant: 1
ğŸš¨ API REQUEST (NO AUTH): POST /api/auth/select-tenant - No token found!
âœ… API RESPONSE: /api/auth/select-tenant 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/auth/select-tenant : {
  accessToken: 'phase2-token-tenant-1',
  refreshToken: 'refresh-token-updated',
  expiresAt: '2025-09-03T16:49:27.055Z',
  tokenType: 'Bearer',
  user: {
    id: '1',
    email: 'admin@tenant1.com',
    firstName: 'Admin',
    lastName: 'User',
    fullName: 'Admin User',
    timeZone: 'UTC',
    language: 'en',
    emailConfirmed: true,
    isActive: true,
    roles: [ 'User' ],
    tenantId: '1',
    createdAt: '2025-09-03T15:49:27.055Z',
    updatedAt: '2025-09-03T15:49:27.055Z',
    preferences: {
      theme: 'light',
      language: 'en',
      timeZone: 'UTC',
      notifications: [Object]
    }
  },
  tenant: {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
}
ğŸ¢ TenantService: Select tenant API response: {
  accessToken: 'phase2-token-tenant-1',
  refreshToken: 'refresh-token-updated',
  expiresAt: '2025-09-03T16:49:27.055Z',
  tokenType: 'Bearer',
  user: {
    id: '1',
    email: 'admin@tenant1.com',
    firstName: 'Admin',
    lastName: 'User',
    fullName: 'Admin User',
    timeZone: 'UTC',
    language: 'en',
    emailConfirmed: true,
    isActive: true,
    roles: [ 'User' ],
    tenantId: '1',
    createdAt: '2025-09-03T15:49:27.055Z',
    updatedAt: '2025-09-03T15:49:27.055Z',
    preferences: {
      theme: 'light',
      language: 'en',
      timeZone: 'UTC',
      notifications: [Object]
    }
  },
  tenant: {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
}

stdout | src/test/scenarios/multi-tenant-isolation.test.tsx > Multi-Tenant Permission Isolation Scenarios > Tenant Context Switching
âœ… API RESPONSE: /api/users/2/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/2/tenants : [
  {
    id: 1,
    name: 'Single Tenant',
    domain: 'single.local',
    subscriptionPlan: 'Premium',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
ğŸ¯ MSW: Handling select-tenant request { tenantId: 1 }
ğŸ” TokenManager: Setting new tokens: {
  tokenLength: 21,
  refreshTokenLength: 21,
  isJwt: false,
  newTokenClaims: null
}

stdout | src/test/scenarios/multi-tenant-isolation.test.tsx > Multi-Tenant Permission Isolation Scenarios
âœ… API RESPONSE: /api/users/3/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/3/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]

stdout | src/test/scenarios/multi-tenant-isolation.test.tsx
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
]
âœ… API RESPONSE: /api/auth/select-tenant 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/auth/select-tenant : {
  accessToken: 'phase2-token-tenant-1',
  refreshToken: 'refresh-token-updated',
  expiresAt: '2025-09-03T16:49:27.067Z',
  tokenType: 'Bearer',
  user: {
    id: '1',
    email: 'admin@tenant1.com',
    firstName: 'Admin',
    lastName: 'User',
    fullName: 'Admin User',
    timeZone: 'UTC',
    language: 'en',
    emailConfirmed: true,
    isActive: true,
    roles: [ 'User' ],
    tenantId: '1',
    createdAt: '2025-09-03T15:49:27.067Z',
    updatedAt: '2025-09-03T15:49:27.067Z',
    preferences: {
      theme: 'light',
      language: 'en',
      timeZone: 'UTC',
      notifications: [Object]
    }
  },
  tenant: {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
}
ğŸ¢ TenantService: Select tenant API response: {
  accessToken: 'phase2-token-tenant-1',
  refreshToken: 'refresh-token-updated',
  expiresAt: '2025-09-03T16:49:27.067Z',
  tokenType: 'Bearer',
  user: {
    id: '1',
    email: 'admin@tenant1.com',
    firstName: 'Admin',
    lastName: 'User',
    fullName: 'Admin User',
    timeZone: 'UTC',
    language: 'en',
    emailConfirmed: true,
    isActive: true,
    roles: [ 'User' ],
    tenantId: '1',
    createdAt: '2025-09-03T15:49:27.067Z',
    updatedAt: '2025-09-03T15:49:27.067Z',
    preferences: {
      theme: 'light',
      language: 'en',
      timeZone: 'UTC',
      notifications: [Object]
    }
  },
  tenant: {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:26.996Z',
    updatedAt: '2025-09-03T15:49:26.996Z'
  }
}
ğŸ” TokenManager: Setting new tokens: {
  tokenLength: 21,
  refreshTokenLength: 21,
  isJwt: false,
  newTokenClaims: null
}

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
ğŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
ğŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:22:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:23:13)
  - /api/* â†’ UserService (port 7002)

stdout | src/test/examples/rbac-usage-examples.test.tsx > RBAC Usage Examples > Component Testing Examples > should render components with different roles
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/3/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/3/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '3', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario

stdout | src/test/examples/rbac-usage-examples.test.tsx > RBAC Usage Examples > Component Testing Examples > should render components as regular user
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/5/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/5/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '5', scenario: null }
ğŸ¯ MSW: Returning multiple tenants scenario
âœ… API RESPONSE: /api/users/3/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/3/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  }
]
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  }
]

stdout | src/test/examples/rbac-usage-examples.test.tsx > RBAC Usage Examples > Component Testing Examples > should render components as viewer
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/6/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/6/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '6', scenario: null }
ğŸ¯ MSW: Returning error scenario
âœ… API RESPONSE: /api/users/5/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/5/tenants : [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  }
]
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  },
  {
    id: 2,
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  },
  {
    id: 3,
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  },
  {
    id: '2',
    name: 'Tenant One',
    domain: 'tenant1.test',
    subscriptionPlan: 'Basic',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  },
  {
    id: '3',
    name: 'Tenant Two',
    domain: 'tenant2.test',
    subscriptionPlan: 'Pro',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.098Z',
    updatedAt: '2025-09-03T15:49:27.098Z'
  }
]

stderr | src/test/examples/rbac-usage-examples.test.tsx > RBAC Usage Examples > System vs Tenant Role Examples > should distinguish between system and tenant roles
ğŸš¨ API ERROR: /api/users/6/tenants 500 Request failed with status code 500
ğŸš¨ API Error Details: {
  message: 'Failed to load tenants',
  errors: [ 'Failed to load tenants' ],
  traceId: undefined
}
ğŸ¢ TenantService: API call failed: Error [ApiError]: Failed to load tenants
    at C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:72:35
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Axios.request (file:///C:/Users/mccre/dev/boiler/src/frontend/react-app/node_modules/axios/lib/core/Axios.js:40:14)
    at ApiClient.get (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:174:12)
    at TenantService.getUserTenants (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\tenant.service.ts:21:24)
    at loadUserTenants (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\contexts\TenantContext.tsx:105:24) {
  response: {
    data: {
      success: false,
      data: null,
      message: 'Failed to load tenants',
      errors: [Array]
    },
    status: 500,
    statusText: 'Internal Server Error',
    headers: Object [AxiosHeaders] {
      'content-length': '100',
      'content-type': 'application/json'
    },
    config: {
      transitional: [Object],
      adapter: [Array],
      transformRequest: [Array],
      transformResponse: [Array],
      timeout: 10000,
      xsrfCookieName: 'XSRF-TOKEN',
      xsrfHeaderName: 'X-XSRF-TOKEN',
      maxContentLength: -1,
      maxBodyLength: -1,
      env: [Object],
      validateStatus: [Function: validateStatus],
      headers: [Object [AxiosHeaders]],
      baseURL: '',
      method: 'get',
      url: '/api/users/6/tenants',
      allowAbsoluteUrls: true,
      data: undefined
    },
    request: XMLHttpRequest {
      open: [Function: open],
      setRequestHeader: [Function: setRequestHeader],
      send: [Function: send],
      abort: [Function: abort],
      getResponseHeader: [Function (anonymous)],
      getAllResponseHeaders: [Function (anonymous)],
      overrideMimeType: [Function: overrideMimeType],
      onreadystatechange: [Getter/Setter],
      readyState: 4,
      timeout: [Getter/Setter],
      withCredentials: [Getter/Setter],
      upload: XMLHttpRequestUpload {},
      responseURL: 'http://localhost:3000/api/users/6/tenants',
      status: 500,
      statusText: 'Internal Server Error',
      responseType: [Getter/Setter],
      response: [Getter],
      responseText: [Getter],
      responseXML: [Getter],
      UNSENT: 0,
      OPENED: 1,
      HEADERS_RECEIVED: 2,
      LOADING: 3,
      DONE: 4,
      [Symbol(SameObject caches)]: [Object: null prototype]
    }
  },
  status: 500,
  errors: [ 'Failed to load tenants' ]
}

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:20:13)
ğŸ” API CLIENT: Creating axios instance with baseURL: empty (using Vite proxy)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:21:13)
ğŸ” API CLIENT: Expected proxy config:

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:22:13)
  - /api/auth/* â†’ AuthService (port 7001)

stdout | new ApiClient (C:\Users\mccre\dev\boiler\src\frontend\react-app\src\services\api.client.ts:23:13)
  - /api/* â†’ UserService (port 7002)

stdout | src/test/scenarios/role-hierarchy-scenarios.test.tsx > Role Hierarchy Validation Scenarios > System vs Tenant Role Separation > should separate system-level and tenant-level permissions
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/2/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/2/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '2', scenario: null }
ğŸ¯ MSW: Returning single tenant scenario

stdout | src/test/scenarios/role-hierarchy-scenarios.test.tsx > Role Hierarchy Validation Scenarios > System vs Tenant Role Separation > should validate system role permissions
âœ… API RESPONSE: /api/users/2/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/2/tenants : [
  {
    id: 1,
    name: 'Single Tenant',
    domain: 'single.local',
    subscriptionPlan: 'Premium',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.145Z',
    updatedAt: '2025-09-03T15:49:27.145Z'
  }
]
ğŸ” TenantService: Raw API response: [
  {
    id: 1,
    name: 'Single Tenant',
    domain: 'single.local',
    subscriptionPlan: 'Premium',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.145Z',
    updatedAt: '2025-09-03T15:49:27.145Z'
  }
]
ğŸ” TenantService: Converted tenants: [
  {
    id: '1',
    name: 'Single Tenant',
    domain: 'single.local',
    subscriptionPlan: 'Premium',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.145Z',
    updatedAt: '2025-09-03T15:49:27.145Z'
  }
]
ğŸ¢ TenantService: Calling select-tenant API for tenant: 1
ğŸš¨ API REQUEST (NO AUTH): POST /api/auth/select-tenant - No token found!

stdout | src/test/scenarios/role-hierarchy-scenarios.test.tsx > Role Hierarchy Validation Scenarios > System vs Tenant Role Separation
ğŸ¯ MSW: Handling select-tenant request { tenantId: 1 }

stdout | src/test/scenarios/role-hierarchy-scenarios.test.tsx > Role Hierarchy Validation Scenarios > Multi-Role User Scenarios > should handle users with multiple roles correctly
ğŸ¢ API CLIENT: Tenant context cleared (using JWT for tenant context)
ğŸ” TenantService: Calling API endpoint: /api/users/7/tenants
ğŸš¨ API REQUEST (NO AUTH): GET /api/users/7/tenants - No token found!
ğŸ¯ MSW: Handling /api/users/:userId/tenants request { userId: '7', scenario: null }
ğŸ¯ MSW: Returning no tenants scenario
âœ… API RESPONSE: /api/auth/select-tenant 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/auth/select-tenant : {
  accessToken: 'phase2-token-tenant-1',
  refreshToken: 'refresh-token-updated',
  expiresAt: '2025-09-03T16:49:27.172Z',
  tokenType: 'Bearer',
  user: {
    id: '1',
    email: 'admin@tenant1.com',
    firstName: 'Admin',
    lastName: 'User',
    fullName: 'Admin User',
    timeZone: 'UTC',
    language: 'en',
    emailConfirmed: true,
    isActive: true,
    roles: [ 'User' ],
    tenantId: '1',
    createdAt: '2025-09-03T15:49:27.172Z',
    updatedAt: '2025-09-03T15:49:27.172Z',
    preferences: {
      theme: 'light',
      language: 'en',
      timeZone: 'UTC',
      notifications: [Object]
    }
  },
  tenant: {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.145Z',
    updatedAt: '2025-09-03T15:49:27.145Z'
  }
}
ğŸ¢ TenantService: Select tenant API response: {
  accessToken: 'phase2-token-tenant-1',
  refreshToken: 'refresh-token-updated',
  expiresAt: '2025-09-03T16:49:27.172Z',
  tokenType: 'Bearer',
  user: {
    id: '1',
    email: 'admin@tenant1.com',
    firstName: 'Admin',
    lastName: 'User',
    fullName: 'Admin User',
    timeZone: 'UTC',
    language: 'en',
    emailConfirmed: true,
    isActive: true,
    roles: [ 'User' ],
    tenantId: '1',
    createdAt: '2025-09-03T15:49:27.172Z',
    updatedAt: '2025-09-03T15:49:27.172Z',
    preferences: {
      theme: 'light',
      language: 'en',
      timeZone: 'UTC',
      notifications: [Object]
    }
  },
  tenant: {
    id: '1',
    name: 'Test Tenant',
    domain: 'test.local',
    subscriptionPlan: 'Development',
    isActive: true,
    createdAt: '2025-09-03T15:49:27.145Z',
    updatedAt: '2025-09-03T15:49:27.145Z'
  }
}

stdout | src/test/scenarios/role-hierarchy-scenarios.test.tsx > Role Hierarchy Validation Scenarios > Multi-Role User Scenarios > should prioritize highest role level for admin checks
ğŸ” TokenManager: Setting new tokens: {
  tokenLength: 21,
  refreshTokenLength: 21,
  isJwt: false,
  newTokenClaims: null
}
âœ… API RESPONSE: /api/users/7/tenants 200
ğŸ” API CLIENT: Detected .NET 9 ApiResponseDto structure: { success: true, message: undefined, hasData: true, errors: 0 }
ğŸ” API CLIENT: Unwrapped response for /api/users/7/tenants : []
ğŸ” TenantService: Raw API response: []

 âœ“ src/contexts/__tests__/AuthContext.test.tsx (26) 1178ms
   âœ“ AuthContext (26) 1178ms
     âœ“ useAuth hook (1)
       âœ“ should throw error when used outside AuthProvider
     âœ“ AuthProvider initialization (6)
       âœ“ should initialize with default unauthenticated state
       âœ“ should initialize with test mode when mockUser provided
       âœ“ should initialize with loading state when mockAuthState is loading
       âœ“ should initialize auth when valid token exists
       âœ“ should refresh token when existing token is expired
       âœ“ should clear auth when token refresh fails
     âœ“ login functionality (3)
       âœ“ should login successfully with valid credentials
       âœ“ should handle login failure
       âœ“ should set loading state during login
     âœ“ logout functionality (3)
       âœ“ should logout successfully
       âœ“ should handle logout service failure gracefully
       âœ“ should not call tokenManager in test mode
     âœ“ error handling (1)
       âœ“ should clear error when clearError is called
     âœ“ role and permission extraction (5)
       âœ“ should extract roles from JWT token as array
       âœ“ should extract roles from JWT token as comma-separated string
       âœ“ should extract permissions from JWT token
       âœ“ should handle missing role claims gracefully
       âœ“ should handle token parsing errors
     âœ“ register functionality (2)
       âœ“ should register successfully
       âœ“ should handle register failure
     âœ“ auth event listener (1)
       âœ“ should listen for auth:logout events
     âœ“ refreshAuth functionality (2)
       âœ“ should refresh auth in non-test mode
       âœ“ should not refresh auth in test mode
     âœ“ multiple role handling (2)
       âœ“ should handle user with multiple roles from user object
       âœ“ should handle single role from user object
 â¯ src/contexts/__tests__/TenantContext.test.tsx (12) 58401ms
   â¯ TenantContext - Enhanced Tests (12) 58400ms
     â¯ Single Tenant Auto-Selection (2) 16037ms
       Ã— should load and auto-select single tenant (retry x1) 16031ms
       âœ“ should call selectTenant API for single tenant
     â¯ Multiple Tenants (2) 18104ms
       Ã— should show tenant selector for multiple tenants (retry x1) 16052ms
       Ã— should complete tenant selection for multiple tenants (retry x1) 2052ms
     â¯ Tenant Switching (2) 4073ms
       Ã— should switch between tenants (retry x1) 2015ms
       Ã— should set redirect flag after successful switch (retry x1) 2058ms
     â¯ Error Handling (3) 2092ms
       âœ“ should handle getUserTenants API failure
       âœ“ should handle selectTenant API failure
       Ã— should handle switchTenant API failure (retry x1) 2053ms
     â¯ Loading States (1) 16048ms
       Ã— should show loading state while fetching tenants (retry x1) 16048ms
     â¯ JWT Token Integration (1) 2032ms
       Ã— should handle page refresh with existing JWT tenant (retry x1) 2032ms
     âœ“ No Tenants Scenario (1)
       âœ“ should handle user with no tenant access
 âœ“ src/test/scenarios/api-permission-integration.test.tsx (6) 386ms
   âœ“ API Permission Integration Scenarios (6) 386ms
     âœ“ API Call Authorization (2)
       âœ“ should allow API calls for users with correct permissions
       âœ“ should reject API calls for users without permissions
     âœ“ Role-Based Data Filtering (2)
       âœ“ should filter user data based on role permissions
       âœ“ should limit data for lower privilege users
     âœ“ Permission-Based Error Handling (2)
       âœ“ should handle 403 Forbidden responses gracefully
       âœ“ should handle successful operations for authorized users
 âœ“ src/test/scenarios/permission-component-patterns.test.tsx (4)
   âœ“ RBAC Permission Component Patterns (4)
     âœ“ Conditional UI Rendering (1)
       âœ“ should show/hide UI elements based on user permissions
     âœ“ Form Field Permissions (1)
       âœ“ should enable/disable form fields based on permissions
     âœ“ Navigation Menu Permissions (1)
       âœ“ should show navigation items based on user permissions
     âœ“ Data Table Action Buttons (1)
       âœ“ should show/hide action buttons based on permissions
 âœ“ src/test/scenarios/role-hierarchy-scenarios.test.tsx (6)
   âœ“ Role Hierarchy Validation Scenarios (6)
     âœ“ Permission Inheritance (2)
       âœ“ should validate role hierarchy levels
       âœ“ should ensure higher roles have more permissions than lower roles
     âœ“ System vs Tenant Role Separation (2)
       âœ“ should separate system-level and tenant-level permissions
       âœ“ should validate system role permissions
     âœ“ Multi-Role User Scenarios (2)
       âœ“ should handle users with multiple roles correctly
       âœ“ should prioritize highest role level for admin checks
 âœ“ src/test/examples/rbac-usage-examples.test.tsx (8)
   âœ“ RBAC Usage Examples (8)
     âœ“ Basic Permission Checks (3)
       âœ“ should demonstrate basic permission checking
       âœ“ should demonstrate role hierarchy checks
       âœ“ should demonstrate multi-role user handling
     âœ“ Component Testing Examples (3)
       âœ“ should render components with different roles
       âœ“ should render components as regular user
       âœ“ should render components as viewer
     âœ“ System vs Tenant Role Examples (2)
       âœ“ should distinguish between system and tenant roles
       âœ“ should handle super admin permissions
 âœ“ src/test/scenarios/multi-tenant-isolation.test.tsx (6)
   âœ“ Multi-Tenant Permission Isolation Scenarios (6)
     âœ“ Tenant Data Isolation (2)
       âœ“ should isolate tenant data access
       âœ“ should prevent cross-tenant role assignment
     âœ“ Tenant-Scoped Permissions (2)
       âœ“ should scope permissions to specific tenants
       âœ“ should allow system admins to access multiple tenants
     âœ“ Tenant Context Switching (2)
       âœ“ should handle tenant context switching for multi-tenant users
       âœ“ should restrict tenant switching for single-tenant users
 â¯ src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx (5) 31963ms
   â¯ Two-Phase Authentication Flow (5) 31960ms
     âœ“ should complete Phase 1: Login without tenant context 975ms
     Ã— should complete Phase 2: Tenant selection (retry x1) 10081ms
     Ã— should handle single tenant auto-selection (retry x1) 10053ms
     âœ“ should handle authentication errors 789ms
     Ã— should handle tenant loading errors (retry x1) 10062ms
 âœ“ src/components/auth/__tests__/TenantSelector.test.tsx (11) 660ms
   âœ“ TenantSelector - Enhanced Tests (11) 659ms
     âœ“ Multiple Tenants (3) 307ms
       âœ“ displays tenants and heading (no duplicate query issues)
       âœ“ calls onTenantSelected when tenant selected then continue clicked
       âœ“ shows subscription plan badges
     âœ“ Single Tenant Auto-Selection (2)
       âœ“ auto-selects the single tenant and shows Continue button
       âœ“ invokes onTenantSelected after clicking continue
     âœ“ Loading and Error States (4)
       âœ“ shows loading state
       âœ“ shows error state
       âœ“ shows no tenants message
       âœ“ disables continue button when nothing selected
     âœ“ Selection Interaction (2)
       âœ“ enables continue button after selecting a tenant
       âœ“ shows visual selection feedback (aria-selected)
 âœ“ src/components/__tests__/routes/AppRoutes.test.tsx (6)
   âœ“ AppRoutes (6)
     âœ“ renders role details on /roles/:id route
     âœ“ renders role editor on /roles/:id/edit route
     âœ“ renders role editor on /roles/new route
     âœ“ renders role list on /roles route
     âœ“ redirects root to dashboard
     âœ“ renders login form on /login route
 â¯ src/components/__tests__/roles/RoleList.test.tsx (2) 2074ms
   â¯ RoleList (2) 2074ms
     Ã— renders role data (retry x1) 2048ms
     âœ“ shows loading state
 âœ“ src/components/layout/__tests__/UserMenu.test.tsx (2) 317ms
   âœ“ UserMenu (2) 317ms
     âœ“ should display current tenant in user menu
     âœ“ should not show tenant switching option for single tenant

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯ Failed Tests 12 â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯

 FAIL  src/contexts/__tests__/TenantContext.test.tsx > TenantContext - Enhanced Tests > Single Tenant Auto-Selection > should load and auto-select single tenant
TestingLibraryElementError: Found multiple elements by: [data-testid="current-tenant"]

Here are the matching elements:

Ignored nodes: comments, script, style
<div
  data-testid="current-tenant"
>
  Test Tenant
</div>

Ignored nodes: comments, script, style
<span
  data-testid="current-tenant"
>
  Test Tenant
</span>

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      data-testid="auth-provider"
    >
      <div>
        <div
          data-testid="current-tenant"
        >
          Test Tenant
        </div>
        <div
          data-testid="available-count"
        >
          1
        </div>
        <div
          data-testid="show-selector"
        >
          false
        </div>
        <div
          data-testid="should-redirect"
        >
          false
        </div>
        <button
          data-testid="switch-tenant"
        >
          Switch Tenant
        </button>
        <button
          data-testid="complete-selection"
        >
          Complete Selection
        </button>
      </div>
      <div
        data-testid="tenant-context-probe"
        style="display: none;"
      >
        <span
          data-testid="current-tenant"
        >
          Test Tenant
        </span>
        <span
          data-testid="available-count"
        >
          1
        </span>
        <span
          data-testid="tenant-loading"
        >
          0
        </span>
        <span
          data-testid="tenant-error"
        />
        <span
          data-testid="tenant-show-selector"
        >
          0
        </span>
      </div>
    </div>
  </div>
</body>

Ignored nodes: comments, script, style
<html>
  <head>
    <meta
      content=""
      name="emotion-insertion-point"
    />
  </head>
  <body>
    <div>
      <div
        data-testid="auth-provider"
      >
        <div>
          <div
            data-testid="current-tenant"
          >
            Test Tenant
          </div>
          <div
            data-testid="available-count"
          >
            1
          </div>
          <div
            data-testid="show-selector"
          >
            false
          </div>
          <div
            data-testid="should-redirect"
          >
            false
          </div>
          <button
            data-testid="switch-tenant"
          >
            Switch Tenant
          </button>
          <button
            data-testid="complete-selection"
          >
            Complete Selection
          </button>
        </div>
        <div
          data-testid="tenant-context-probe"
          style="display: none;"
        >
          <span
            data-testid="current-tenant"
          >
            Test Tenant
          </span>
          <span
            data-testid="available-count"
          >
            1
          </span>
          <span
            data-testid="tenant-loading"
          >
            0
          </span>
          <span
            data-testid="tenant-error"
          />
          <span
            data-testid="tenant-show-selector"
          >
            0
          </span>
        </div>
      </div>
    </div>
  </body>
</html>...
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/contexts/__tests__/TenantContext.test.tsx:244:13
    242|       render(<TestWrapper />)
    243|
    244|       await waitFor(() => {
       |             ^
    245|         expect(screen.getByTestId('current-tenant')).toHaveTextContent('Test Tenant')
    246|       }, { timeout: 8000 })

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/24]â¯

 FAIL  src/contexts/__tests__/TenantContext.test.tsx > TenantContext - Enhanced Tests > Single Tenant Auto-Selection > should load and auto-select single tenant
TestingLibraryElementError: Found multiple elements by: [data-testid="current-tenant"]

Here are the matching elements:

Ignored nodes: comments, script, style
<div
  data-testid="current-tenant"
>
  Test Tenant
</div>

Ignored nodes: comments, script, style
<span
  data-testid="current-tenant"
>
  Test Tenant
</span>

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      data-testid="auth-provider"
    >
      <div>
        <div
          data-testid="current-tenant"
        >
          Test Tenant
        </div>
        <div
          data-testid="available-count"
        >
          1
        </div>
        <div
          data-testid="show-selector"
        >
          false
        </div>
        <div
          data-testid="should-redirect"
        >
          false
        </div>
        <button
          data-testid="switch-tenant"
        >
          Switch Tenant
        </button>
        <button
          data-testid="complete-selection"
        >
          Complete Selection
        </button>
      </div>
      <div
        data-testid="tenant-context-probe"
        style="display: none;"
      >
        <span
          data-testid="current-tenant"
        >
          Test Tenant
        </span>
        <span
          data-testid="available-count"
        >
          1
        </span>
        <span
          data-testid="tenant-loading"
        >
          0
        </span>
        <span
          data-testid="tenant-error"
        />
        <span
          data-testid="tenant-show-selector"
        >
          0
        </span>
      </div>
    </div>
  </div>
</body>

Ignored nodes: comments, script, style
<html>
  <head>
    <meta
      content=""
      name="emotion-insertion-point"
    />
  </head>
  <body>
    <div>
      <div
        data-testid="auth-provider"
      >
        <div>
          <div
            data-testid="current-tenant"
          >
            Test Tenant
          </div>
          <div
            data-testid="available-count"
          >
            1
          </div>
          <div
            data-testid="show-selector"
          >
            false
          </div>
          <div
            data-testid="should-redirect"
          >
            false
          </div>
          <button
            data-testid="switch-tenant"
          >
            Switch Tenant
          </button>
          <button
            data-testid="complete-selection"
          >
            Complete Selection
          </button>
        </div>
        <div
          data-testid="tenant-context-probe"
          style="display: none;"
        >
          <span
            data-testid="current-tenant"
          >
            Test Tenant
          </span>
          <span
            data-testid="available-count"
          >
            1
          </span>
          <span
            data-testid="tenant-loading"
          >
            0
          </span>
          <span
            data-testid="tenant-error"
          />
          <span
            data-testid="tenant-show-selector"
          >
            0
          </span>
        </div>
      </div>
    </div>
  </body>
</html>...
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/contexts/__tests__/TenantContext.test.tsx:244:13
    242|       render(<TestWrapper />)
    243|
    244|       await waitFor(() => {
       |             ^
    245|         expect(screen.getByTestId('current-tenant')).toHaveTextContent('Test Tenant')
    246|       }, { timeout: 8000 })

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/24]â¯

 FAIL  src/contexts/__tests__/TenantContext.test.tsx > TenantContext - Enhanced Tests > Multiple Tenants > should show tenant selector for multiple tenants
 FAIL  src/contexts/__tests__/TenantContext.test.tsx > TenantContext - Enhanced Tests > Multiple Tenants > should show tenant selector for multiple tenants
TestingLibraryElementError: Found multiple elements by: [data-testid="available-count"]

Here are the matching elements:

Ignored nodes: comments, script, style
<div
  data-testid="available-count"
>
  2
</div>

Ignored nodes: comments, script, style
<span
  data-testid="available-count"
>
  2
</span>

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      data-testid="auth-provider"
    >
      <div>
        <div
          data-testid="current-tenant"
        >
          No tenant
        </div>
        <div
          data-testid="available-count"
        >
          2
        </div>
        <div
          data-testid="show-selector"
        >
          true
        </div>
        <div
          data-testid="should-redirect"
        >
          false
        </div>
        <div
          data-testid="tenant-selector"
        >
          Selector shown
        </div>
        <button
          data-testid="switch-tenant"
        >
          Switch Tenant
        </button>
        <button
          data-testid="complete-selection"
        >
          Complete Selection
        </button>
      </div>
      <div
        data-testid="tenant-context-probe"
        style="display: none;"
      >
        <span
          data-testid="current-tenant"
        />
        <span
          data-testid="available-count"
        >
          2
        </span>
        <span
          data-testid="tenant-loading"
        >
          0
        </span>
        <span
          data-testid="tenant-error"
        />
        <span
          data-testid="tenant-show-selector"
        >
          1
        </span>
      </div>
    </div>
  </div>
</body>

Ignored nodes: comments, script, style
<html>
  <head>
    <meta
      content=""
      name="emotion-insertion-point"
    />
  </head>
  <body>
    <div>
      <div
        data-testid="auth-provider"
      >
        <div>
          <div
            data-testid="current-tenant"
          >
            No tenant
          </div>
          <div
            data-testid="available-count"
          >
            2
          </div>
          <div
            data-testid="show-selector"
          >
            true
          </div>
          <div
            data-testid="should-redirect"
          >
            false
          </div>
          <div
            data-testid="tenant-selector"
          >
            Selector shown
          </div>
          <button
            data-testid="switch-tenant"
          >
            Switch Tenant
          </button>
          <button
            data-testid="complete-selection"
          >
            Complete Selection
          </button>
        </div>
        <div
          data-testid="tenant-context-probe"
          style="display: none;"
        >
          <span
            data-testid="current-tenant"
          />
          <span
            data-testid="available-count"
          >
            2
          </span>
          <span
            data-testid="tenant-loading"
          >
            0
          </span>
          <span
            data-testid="tenant-error"
          />
          <span
            data-testid="tenant-show-selector"
          >
            1
          </span>
        </div>
      </div>
    </div>
  </body>
</html>...
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/contexts/__tests__/TenantContext.test.tsx:272:13
    270|       render(<TestWrapper mockUserTenants={mockMultipleTenants} />)
    271|
    272|       await waitFor(() => {
       |             ^
    273|         expect(screen.getByTestId('available-count')).toHaveTextContent('2')
    274|         expect(screen.getByTestId('show-selector')).toHaveTextContent('true')

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/24]â¯

 FAIL  src/contexts/__tests__/TenantContext.test.tsx > TenantContext - Enhanced Tests > Multiple Tenants > should complete tenant selection for multiple tenants
 FAIL  src/contexts/__tests__/TenantContext.test.tsx > TenantContext - Enhanced Tests > Multiple Tenants > should complete tenant selection for multiple tenants
TestingLibraryElementError: Found multiple elements by: [data-testid="available-count"]

Here are the matching elements:

Ignored nodes: comments, script, style
<div
  data-testid="available-count"
>
  2
</div>

Ignored nodes: comments, script, style
<span
  data-testid="available-count"
>
  2
</span>

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      data-testid="auth-provider"
    >
      <div>
        <div
          data-testid="current-tenant"
        >
          No tenant
        </div>
        <div
          data-testid="available-count"
        >
          2
        </div>
        <div
          data-testid="show-selector"
        >
          true
        </div>
        <div
          data-testid="should-redirect"
        >
          false
        </div>
        <div
          data-testid="tenant-selector"
        >
          Selector shown
        </div>
        <button
          data-testid="switch-tenant"
        >
          Switch Tenant
        </button>
        <button
          data-testid="complete-selection"
        >
          Complete Selection
        </button>
      </div>
      <div
        data-testid="tenant-context-probe"
        style="display: none;"
      >
        <span
          data-testid="current-tenant"
        />
        <span
          data-testid="available-count"
        >
          2
        </span>
        <span
          data-testid="tenant-loading"
        >
          0
        </span>
        <span
          data-testid="tenant-error"
        />
        <span
          data-testid="tenant-show-selector"
        >
          1
        </span>
      </div>
    </div>
  </div>
</body>

Ignored nodes: comments, script, style
<html>
  <head>
    <meta
      content=""
      name="emotion-insertion-point"
    />
  </head>
  <body>
    <div>
      <div
        data-testid="auth-provider"
      >
        <div>
          <div
            data-testid="current-tenant"
          >
            No tenant
          </div>
          <div
            data-testid="available-count"
          >
            2
          </div>
          <div
            data-testid="show-selector"
          >
            true
          </div>
          <div
            data-testid="should-redirect"
          >
            false
          </div>
          <div
            data-testid="tenant-selector"
          >
            Selector shown
          </div>
          <button
            data-testid="switch-tenant"
          >
            Switch Tenant
          </button>
          <button
            data-testid="complete-selection"
          >
            Complete Selection
          </button>
        </div>
        <div
          data-testid="tenant-context-probe"
          style="display: none;"
        >
          <span
            data-testid="current-tenant"
          />
          <span
            data-testid="available-count"
          >
            2
          </span>
          <span
            data-testid="tenant-loading"
          >
            0
          </span>
          <span
            data-testid="tenant-error"
          />
          <span
            data-testid="tenant-show-selector"
          >
            1
          </span>
        </div>
      </div>
    </div>
  </body>
</html>...
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/contexts/__tests__/TenantContext.test.tsx:293:13
    291|       render(<TestWrapper mockUserTenants={mockMultipleTenants} />)
    292|
    293|       await waitFor(() => {
       |             ^
    294|         expect(screen.getByTestId('available-count')).toHaveTextContent('2')
    295|       })

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/24]â¯

 FAIL  src/contexts/__tests__/TenantContext.test.tsx > TenantContext - Enhanced Tests > Tenant Switching > should switch between tenants
 FAIL  src/contexts/__tests__/TenantContext.test.tsx > TenantContext - Enhanced Tests > Tenant Switching > should switch between tenants
TestingLibraryElementError: Found multiple elements by: [data-testid="available-count"]

Here are the matching elements:

Ignored nodes: comments, script, style
<div
  data-testid="available-count"
>
  2
</div>

Ignored nodes: comments, script, style
<span
  data-testid="available-count"
>
  2
</span>

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      data-testid="auth-provider"
    >
      <div>
        <div
          data-testid="current-tenant"
        >
          No tenant
        </div>
        <div
          data-testid="available-count"
        >
          2
        </div>
        <div
          data-testid="show-selector"
        >
          true
        </div>
        <div
          data-testid="should-redirect"
        >
          false
        </div>
        <div
          data-testid="tenant-selector"
        >
          Selector shown
        </div>
        <button
          data-testid="switch-tenant"
        >
          Switch Tenant
        </button>
        <button
          data-testid="complete-selection"
        >
          Complete Selection
        </button>
      </div>
      <div
        data-testid="tenant-context-probe"
        style="display: none;"
      >
        <span
          data-testid="current-tenant"
        />
        <span
          data-testid="available-count"
        >
          2
        </span>
        <span
          data-testid="tenant-loading"
        >
          0
        </span>
        <span
          data-testid="tenant-error"
        />
        <span
          data-testid="tenant-show-selector"
        >
          1
        </span>
      </div>
    </div>
  </div>
</body>

Ignored nodes: comments, script, style
<html>
  <head>
    <meta
      content=""
      name="emotion-insertion-point"
    />
  </head>
  <body>
    <div>
      <div
        data-testid="auth-provider"
      >
        <div>
          <div
            data-testid="current-tenant"
          >
            No tenant
          </div>
          <div
            data-testid="available-count"
          >
            2
          </div>
          <div
            data-testid="show-selector"
          >
            true
          </div>
          <div
            data-testid="should-redirect"
          >
            false
          </div>
          <div
            data-testid="tenant-selector"
          >
            Selector shown
          </div>
          <button
            data-testid="switch-tenant"
          >
            Switch Tenant
          </button>
          <button
            data-testid="complete-selection"
          >
            Complete Selection
          </button>
        </div>
        <div
          data-testid="tenant-context-probe"
          style="display: none;"
        >
          <span
            data-testid="current-tenant"
          />
          <span
            data-testid="available-count"
          >
            2
          </span>
          <span
            data-testid="tenant-loading"
          >
            0
          </span>
          <span
            data-testid="tenant-error"
          />
          <span
            data-testid="tenant-show-selector"
          >
            1
          </span>
        </div>
      </div>
    </div>
  </body>
</html>...
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/contexts/__tests__/TenantContext.test.tsx:328:13
    326|       render(<TestWrapper mockUserTenants={mockMultipleTenants} />)
    327|
    328|       await waitFor(() => {
       |             ^
    329|         expect(screen.getByTestId('available-count')).toHaveTextContent('2')
    330|       })

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/24]â¯

 FAIL  src/contexts/__tests__/TenantContext.test.tsx > TenantContext - Enhanced Tests > Tenant Switching > should set redirect flag after successful switch
 FAIL  src/contexts/__tests__/TenantContext.test.tsx > TenantContext - Enhanced Tests > Tenant Switching > should set redirect flag after successful switch
TestingLibraryElementError: Found multiple elements by: [data-testid="available-count"]

Here are the matching elements:

Ignored nodes: comments, script, style
<div
  data-testid="available-count"
>
  2
</div>

Ignored nodes: comments, script, style
<span
  data-testid="available-count"
>
  2
</span>

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      data-testid="auth-provider"
    >
      <div>
        <div
          data-testid="current-tenant"
        >
          No tenant
        </div>
        <div
          data-testid="available-count"
        >
          2
        </div>
        <div
          data-testid="show-selector"
        >
          true
        </div>
        <div
          data-testid="should-redirect"
        >
          false
        </div>
        <div
          data-testid="tenant-selector"
        >
          Selector shown
        </div>
        <button
          data-testid="switch-tenant"
        >
          Switch Tenant
        </button>
        <button
          data-testid="complete-selection"
        >
          Complete Selection
        </button>
      </div>
      <div
        data-testid="tenant-context-probe"
        style="display: none;"
      >
        <span
          data-testid="current-tenant"
        />
        <span
          data-testid="available-count"
        >
          2
        </span>
        <span
          data-testid="tenant-loading"
        >
          0
        </span>
        <span
          data-testid="tenant-error"
        />
        <span
          data-testid="tenant-show-selector"
        >
          1
        </span>
      </div>
    </div>
  </div>
</body>

Ignored nodes: comments, script, style
<html>
  <head>
    <meta
      content=""
      name="emotion-insertion-point"
    />
  </head>
  <body>
    <div>
      <div
        data-testid="auth-provider"
      >
        <div>
          <div
            data-testid="current-tenant"
          >
            No tenant
          </div>
          <div
            data-testid="available-count"
          >
            2
          </div>
          <div
            data-testid="show-selector"
          >
            true
          </div>
          <div
            data-testid="should-redirect"
          >
            false
          </div>
          <div
            data-testid="tenant-selector"
          >
            Selector shown
          </div>
          <button
            data-testid="switch-tenant"
          >
            Switch Tenant
          </button>
          <button
            data-testid="complete-selection"
          >
            Complete Selection
          </button>
        </div>
        <div
          data-testid="tenant-context-probe"
          style="display: none;"
        >
          <span
            data-testid="current-tenant"
          />
          <span
            data-testid="available-count"
          >
            2
          </span>
          <span
            data-testid="tenant-loading"
          >
            0
          </span>
          <span
            data-testid="tenant-error"
          />
          <span
            data-testid="tenant-show-selector"
          >
            1
          </span>
        </div>
      </div>
    </div>
  </body>
</html>...
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/contexts/__tests__/TenantContext.test.tsx:344:13
    342|       render(<TestWrapper mockUserTenants={mockMultipleTenants} />)
    343|
    344|       await waitFor(() => {
       |             ^
    345|         expect(screen.getByTestId('available-count')).toHaveTextContent('2')
    346|       })

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[6/24]â¯

 FAIL  src/contexts/__tests__/TenantContext.test.tsx > TenantContext - Enhanced Tests > Error Handling > should handle switchTenant API failure
TestingLibraryElementError: Found multiple elements by: [data-testid="available-count"]

Here are the matching elements:

Ignored nodes: comments, script, style
<div
  data-testid="available-count"
>
  2
</div>

Ignored nodes: comments, script, style
<span
  data-testid="available-count"
>
  2
</span>

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      data-testid="auth-provider"
    >
      <div>
        <div
          data-testid="current-tenant"
        >
          No tenant
        </div>
        <div
          data-testid="available-count"
        >
          2
        </div>
        <div
          data-testid="show-selector"
        >
          true
        </div>
        <div
          data-testid="should-redirect"
        >
          false
        </div>
        <div
          data-testid="tenant-selector"
        >
          Selector shown
        </div>
        <button
          data-testid="switch-tenant"
        >
          Switch Tenant
        </button>
        <button
          data-testid="complete-selection"
        >
          Complete Selection
        </button>
      </div>
      <div
        data-testid="tenant-context-probe"
        style="display: none;"
      >
        <span
          data-testid="current-tenant"
        />
        <span
          data-testid="available-count"
        >
          2
        </span>
        <span
          data-testid="tenant-loading"
        >
          0
        </span>
        <span
          data-testid="tenant-error"
        />
        <span
          data-testid="tenant-show-selector"
        >
          1
        </span>
      </div>
    </div>
  </div>
</body>

Ignored nodes: comments, script, style
<html>
  <head>
    <meta
      content=""
      name="emotion-insertion-point"
    />
  </head>
  <body>
    <div>
      <div
        data-testid="auth-provider"
      >
        <div>
          <div
            data-testid="current-tenant"
          >
            No tenant
          </div>
          <div
            data-testid="available-count"
          >
            2
          </div>
          <div
            data-testid="show-selector"
          >
            true
          </div>
          <div
            data-testid="should-redirect"
          >
            false
          </div>
          <div
            data-testid="tenant-selector"
          >
            Selector shown
          </div>
          <button
            data-testid="switch-tenant"
          >
            Switch Tenant
          </button>
          <button
            data-testid="complete-selection"
          >
            Complete Selection
          </button>
        </div>
        <div
          data-testid="tenant-context-probe"
          style="display: none;"
        >
          <span
            data-testid="current-tenant"
          />
          <span
            data-testid="available-count"
          >
            2
          </span>
          <span
            data-testid="tenant-loading"
          >
            0
          </span>
          <span
            data-testid="tenant-error"
          />
          <span
            data-testid="tenant-show-selector"
          >
            1
          </span>
        </div>
      </div>
    </div>
  </body>
</html>...
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/contexts/__tests__/TenantContext.test.tsx:385:13
    383|       render(<TestWrapper mockUserTenants={mockMultipleTenants} />)
    384|
    385|       await waitFor(() => {
       |             ^
    386|         expect(screen.getByTestId('available-count')).toHaveTextContent('2')
    387|       })

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[7/24]â¯

 FAIL  src/contexts/__tests__/TenantContext.test.tsx > TenantContext - Enhanced Tests > Error Handling > should handle switchTenant API failure
TestingLibraryElementError: Found multiple elements by: [data-testid="available-count"]

Here are the matching elements:

Ignored nodes: comments, script, style
<div
  data-testid="available-count"
>
  2
</div>

Ignored nodes: comments, script, style
<span
  data-testid="available-count"
>
  2
</span>

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      data-testid="auth-provider"
    >
      <div>
        <div
          data-testid="current-tenant"
        >
          No tenant
        </div>
        <div
          data-testid="available-count"
        >
          2
        </div>
        <div
          data-testid="show-selector"
        >
          true
        </div>
        <div
          data-testid="should-redirect"
        >
          false
        </div>
        <div
          data-testid="tenant-selector"
        >
          Selector shown
        </div>
        <button
          data-testid="switch-tenant"
        >
          Switch Tenant
        </button>
        <button
          data-testid="complete-selection"
        >
          Complete Selection
        </button>
      </div>
      <div
        data-testid="tenant-context-probe"
        style="display: none;"
      >
        <span
          data-testid="current-tenant"
        />
        <span
          data-testid="available-count"
        >
          2
        </span>
        <span
          data-testid="tenant-loading"
        >
          0
        </span>
        <span
          data-testid="tenant-error"
        />
        <span
          data-testid="tenant-show-selector"
        >
          1
        </span>
      </div>
    </div>
  </div>
</body>

Ignored nodes: comments, script, style
<html>
  <head>
    <meta
      content=""
      name="emotion-insertion-point"
    />
  </head>
  <body>
    <div>
      <div
        data-testid="auth-provider"
      >
        <div>
          <div
            data-testid="current-tenant"
          >
            No tenant
          </div>
          <div
            data-testid="available-count"
          >
            2
          </div>
          <div
            data-testid="show-selector"
          >
            true
          </div>
          <div
            data-testid="should-redirect"
          >
            false
          </div>
          <div
            data-testid="tenant-selector"
          >
            Selector shown
          </div>
          <button
            data-testid="switch-tenant"
          >
            Switch Tenant
          </button>
          <button
            data-testid="complete-selection"
          >
            Complete Selection
          </button>
        </div>
        <div
          data-testid="tenant-context-probe"
          style="display: none;"
        >
          <span
            data-testid="current-tenant"
          />
          <span
            data-testid="available-count"
          >
            2
          </span>
          <span
            data-testid="tenant-loading"
          >
            0
          </span>
          <span
            data-testid="tenant-error"
          />
          <span
            data-testid="tenant-show-selector"
          >
            1
          </span>
        </div>
      </div>
    </div>
  </body>
</html>...
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/contexts/__tests__/TenantContext.test.tsx:385:13
    383|       render(<TestWrapper mockUserTenants={mockMultipleTenants} />)
    384|
    385|       await waitFor(() => {
       |             ^
    386|         expect(screen.getByTestId('available-count')).toHaveTextContent('2')
    387|       })

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[8/24]â¯

 FAIL  src/contexts/__tests__/TenantContext.test.tsx > TenantContext - Enhanced Tests > Loading States > should show loading state while fetching tenants
 FAIL  src/contexts/__tests__/TenantContext.test.tsx > TenantContext - Enhanced Tests > Loading States > should show loading state while fetching tenants
Error: expect(element).toHaveTextContent()

Expected element to have text content:
  Test Tenant
Received:


Ignored nodes: comments, script, style
<html>
  <head>
    <meta
      content=""
      name="emotion-insertion-point"
    />
  </head>
  <body>
    <div>
      <div
        data-testid="auth-provider"
      >
        <div
          data-testid="error"
        >
          Failed to select tenant
        </div>
        <div
          data-testid="tenant-context-probe"
          style="display: none;"
        >
          <span
            data-testid="current-tenant"
          />
          <span
            data-testid="available-count"
          >
            1
          </span>
          <span
            data-testid="tenant-loading"
          >
            0
          </span>
          <span
            data-testid="tenant-error"
          >
            Failed to select tenant
          </span>
          <span
            data-testid="tenant-show-selector"
          >
            0
          </span>
        </div>
      </div>
    </div>
  </body>
</html>...
 â¯ __vi_import_1__.waitFor.timeout src/contexts/__tests__/TenantContext.test.tsx:415:54
    413|       // Then should show tenant after loading
    414|       await waitFor(() => {
    415|         expect(screen.getByTestId('current-tenant')).toHaveTextContent('Test Tenant')
       |                                                      ^
    416|       }, { timeout: 8000 })
    417|     }, 15000)
 â¯ runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:47:12
 â¯ checkCallback node_modules/@testing-library/dom/dist/wait-for.js:124:77
 â¯ Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:118:16

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[9/24]â¯

 FAIL  src/contexts/__tests__/TenantContext.test.tsx > TenantContext - Enhanced Tests > JWT Token Integration > should handle page refresh with existing JWT tenant
 FAIL  src/contexts/__tests__/TenantContext.test.tsx > TenantContext - Enhanced Tests > JWT Token Integration > should handle page refresh with existing JWT tenant
TestingLibraryElementError: Found multiple elements by: [data-testid="available-count"]

Here are the matching elements:

Ignored nodes: comments, script, style
<div
  data-testid="available-count"
>
  2
</div>

Ignored nodes: comments, script, style
<span
  data-testid="available-count"
>
  2
</span>

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      data-testid="auth-provider"
    >
      <div>
        <div
          data-testid="current-tenant"
        >
          No tenant
        </div>
        <div
          data-testid="available-count"
        >
          2
        </div>
        <div
          data-testid="show-selector"
        >
          true
        </div>
        <div
          data-testid="should-redirect"
        >
          false
        </div>
        <div
          data-testid="tenant-selector"
        >
          Selector shown
        </div>
        <button
          data-testid="switch-tenant"
        >
          Switch Tenant
        </button>
        <button
          data-testid="complete-selection"
        >
          Complete Selection
        </button>
      </div>
      <div
        data-testid="tenant-context-probe"
        style="display: none;"
      >
        <span
          data-testid="current-tenant"
        />
        <span
          data-testid="available-count"
        >
          2
        </span>
        <span
          data-testid="tenant-loading"
        >
          0
        </span>
        <span
          data-testid="tenant-error"
        />
        <span
          data-testid="tenant-show-selector"
        >
          1
        </span>
      </div>
    </div>
  </div>
</body>

Ignored nodes: comments, script, style
<html>
  <head>
    <meta
      content=""
      name="emotion-insertion-point"
    />
  </head>
  <body>
    <div>
      <div
        data-testid="auth-provider"
      >
        <div>
          <div
            data-testid="current-tenant"
          >
            No tenant
          </div>
          <div
            data-testid="available-count"
          >
            2
          </div>
          <div
            data-testid="show-selector"
          >
            true
          </div>
          <div
            data-testid="should-redirect"
          >
            false
          </div>
          <div
            data-testid="tenant-selector"
          >
            Selector shown
          </div>
          <button
            data-testid="switch-tenant"
          >
            Switch Tenant
          </button>
          <button
            data-testid="complete-selection"
          >
            Complete Selection
          </button>
        </div>
        <div
          data-testid="tenant-context-probe"
          style="display: none;"
        >
          <span
            data-testid="current-tenant"
          />
          <span
            data-testid="available-count"
          >
            2
          </span>
          <span
            data-testid="tenant-loading"
          >
            0
          </span>
          <span
            data-testid="tenant-error"
          />
          <span
            data-testid="tenant-show-selector"
          >
            1
          </span>
        </div>
      </div>
    </div>
  </body>
</html>...
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/contexts/__tests__/TenantContext.test.tsx:433:13
    431|       render(<TestWrapper mockUserTenants={mockMultipleTenants} />)
    432|
    433|       await waitFor(() => {
       |             ^
    434|         expect(screen.getByTestId('available-count')).toHaveTextContent('2')
    435|       })

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[10/24]â¯

 FAIL  src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx > Two-Phase Authentication Flow > should complete Phase 2: Tenant selection
 FAIL  src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx > Two-Phase Authentication Flow > should complete Phase 2: Tenant selection
TestingLibraryElementError: Unable to find an element with the text: Tenant 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div>
    <main
      class="MuiContainer-root MuiContainer-maxWidthSm css-zzzaw2-MuiContainer-root"
      data-testid="tenant-selector-root"
    >
      <div
        class="MuiBox-root css-binzgt"
      >
        <div
          class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-1e2b4v4-MuiPaper-root-MuiCard-root"
          style="--Paper-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);"
        >
          <div
            class="MuiCardContent-root css-21mhzp-MuiCardContent-root"
          >
            <h1
              class="MuiTypography-root MuiTypography-h4 MuiTypography-alignCenter MuiTypography-gutterBottom css-l8ztbh-MuiTypography-root"
              data-testid="tenant-selector-title"
              style="--Typography-textAlign: center;"
            >
              Select Organization
            </h1>
            <p
              class="MuiTypography-root MuiTypography-body1 MuiTypography-alignCenter css-12p21tt-MuiTypography-root"
              data-testid="tenant-selector-subtitle"
              style="--Typography-textAlign: center;"
            >
              You have access to multiple organizations. Please select one to continue.
            </p>
            <div
              class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAlert-root MuiAlert-colorWarning MuiAlert-standardWarning MuiAlert-standard css-1u6i1g1-MuiPaper-root-MuiAlert-root"
              data-testid="tenant-selector-empty"
              role="alert"
              style="--Paper-shadow: none;"
            >
              <div
                class="MuiAlert-icon css-vab54s-MuiAlert-icon"
              >
                <svg
                  aria-hidden="true"
                  class="MuiSvgIcon-root MuiSvgIcon-fontSizeInherit css-1ckov0h-MuiSvgIcon-root"
                  data-testid="ReportProblemOutlinedIcon"
                  focusable="false"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"
                  />
                </svg>
              </div>
              <div
                class="MuiAlert-message css-zioonp-MuiAlert-message"
              >
                You don't have access to any organizations. Please contact your administrator.
              </div>
            </div>
            <ul
              aria-label="Available organizations"
              class="MuiList-root MuiList-padding css-1q05d6r-MuiList-root"
              data-testid="tenant-list"
            />
            <button
              aria-label="Continue with selected organization"
              class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeLarge MuiButton-containedSizeLarge MuiButton-colorPrimary MuiButton-fullWidth Mui-disabled MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeLarge MuiButton-containedSizeLarge MuiButton-colorPrimary MuiButton-fullWidth css-13tpzue-MuiButtonBase-root-MuiButton-root"
              data-testid="tenant-continue-button"
              disabled=""
              tabindex="-1"
              type="button"
            >
              Select Organization
            </button>
          </div>
        </div>
      </div>
    </main>
    <div
      data-testid="tenant-context-probe"
      style="display: none;"
    >
      <span
        data-testid="current-tenant"
      />
      <span
        data-testid="available-count"
      >
        0
      </span>
      <span
        data-testid="tenant-loading"
      >
        0
      </span>
      <span
        data-testid="tenant-error"
      />
      <span
        data-testid="tenant-show-selector"
      >
        0
      </span>
    </div>
  </div>
</body>

Ignored nodes: comments, script, style
<html>
  <head>
    <meta
      content=""
      name="emotion-insertion-point"
    />
  </head>
  <body>
    <div>
      <main
        class="MuiContainer-root MuiContainer-maxWidthSm css-zzzaw2-MuiContainer-root"
        data-testid="tenant-selector-root"
      >
        <div
          class="MuiBox-root css-binzgt"
        >
          <div
            class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-1e2b4v4-MuiPaper-root-MuiCard-root"
            style="--Paper-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);"
          >
            <div
              class="MuiCardContent-root css-21mhzp-MuiCardContent-root"
            >
              <h1
                class="MuiTypography-root MuiTypography-h4 MuiTypography-alignCenter MuiTypography-gutterBottom css-l8ztbh-MuiTypography-root"
                data-testid="tenant-selector-title"
                style="--Typography-textAlign: center;"
              >
                Select Organization
              </h1>
              <p
                class="MuiTypography-root MuiTypography-body1 MuiTypography-alignCenter css-12p21tt-MuiTypography-root"
                data-testid="tenant-selector-subtitle"
                style="--Typography-textAlign: center;"
              >
                You have access to multiple organizations. Please select one to continue.
              </p>
              <div
                class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAlert-root MuiAlert-colorWarning MuiAlert-standardWarning MuiAlert-standard css-1u6i1g1-MuiPaper-root-MuiAlert-root"
                data-testid="tenant-selector-empty"
                role="alert"
                style="--Paper-shadow: none;"
              >
                <div
                  class="MuiAlert-icon css-vab54s-MuiAlert-icon"
                >
                  <svg
                    aria-hidden="true"
                    class="MuiSvgIcon-root MuiSvgIcon-fontSizeInherit css-1ckov0h-MuiSvgIcon-root"
                    data-testid="ReportProblemOutlinedIcon"
                    focusable="false"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"
                    />
                  </svg>
                </div>
                <div
                  class="MuiAlert-message css-zioonp-MuiAlert-message"
                >
                  You don't have access to any organizations. Please contact your administrator.
                </div>
              </div>
              <ul
                aria-label="Available organizations"
                class="MuiList-root MuiList-padding css-1q05d6r-MuiList-root"
                data-testid="tenant-list"
              />
              <button
                aria-label="Continue with selected organization"
                class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeLarge MuiButton-containedSizeLarge MuiButton-colorPrimary MuiButton-fullWidth Mui-disabled MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeLarge MuiButton-containedSizeLarge MuiButton-colorPrimary MuiButton-fullWidth css-13tpzue-MuiButtonBase-root-MuiButton-root"
                data-testid="tenant-continue-button"
                disabled=""
                tabindex="-1"
                type="button"
              >
                Select Organization
              </button>
            </div>
          </div>
        </div>
      </main>
      <div
        data-testid="tenant-context-probe"
        style="display: none;"
      >
        <span
          data-testid="current-tenant"
        />
        <span
          data-testid="available-count"
        >
          0
        </span>
        <span
          data-testid="tenant-loading"
        >
          0
        </span>
        <span
          data-testid="tenant-error"
        />
        <span
          data-testid="tenant-show-selector"
        >
          0
        </span>
      </div>
    </div>
  </body>
</html>...
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx:227:11
    225|
    226|     // Wait for tenants to load and select one
    227|     await waitFor(() => {
       |           ^
    228|       expect(screen.getByText('Tenant 1')).toBeInTheDocument()
    229|     }, { timeout: 5000 })

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[11/24]â¯

 FAIL  src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx > Two-Phase Authentication Flow > should handle single tenant auto-selection
 FAIL  src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx > Two-Phase Authentication Flow > should handle single tenant auto-selection
TestingLibraryElementError: Unable to find an element with the text: Continue. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div>
    <main
      class="MuiContainer-root MuiContainer-maxWidthSm css-zzzaw2-MuiContainer-root"
      data-testid="tenant-selector-root"
    >
      <div
        class="MuiBox-root css-binzgt"
      >
        <div
          class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-1e2b4v4-MuiPaper-root-MuiCard-root"
          style="--Paper-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);"
        >
          <div
            class="MuiCardContent-root css-21mhzp-MuiCardContent-root"
          >
            <h1
              class="MuiTypography-root MuiTypography-h4 MuiTypography-alignCenter MuiTypography-gutterBottom css-l8ztbh-MuiTypography-root"
              data-testid="tenant-selector-title"
              style="--Typography-textAlign: center;"
            >
              Select Organization
            </h1>
            <p
              class="MuiTypography-root MuiTypography-body1 MuiTypography-alignCenter css-12p21tt-MuiTypography-root"
              data-testid="tenant-selector-subtitle"
              style="--Typography-textAlign: center;"
            >
              You have access to multiple organizations. Please select one to continue.
            </p>
            <div
              class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAlert-root MuiAlert-colorWarning MuiAlert-standardWarning MuiAlert-standard css-1u6i1g1-MuiPaper-root-MuiAlert-root"
              data-testid="tenant-selector-empty"
              role="alert"
              style="--Paper-shadow: none;"
            >
              <div
                class="MuiAlert-icon css-vab54s-MuiAlert-icon"
              >
                <svg
                  aria-hidden="true"
                  class="MuiSvgIcon-root MuiSvgIcon-fontSizeInherit css-1ckov0h-MuiSvgIcon-root"
                  data-testid="ReportProblemOutlinedIcon"
                  focusable="false"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"
                  />
                </svg>
              </div>
              <div
                class="MuiAlert-message css-zioonp-MuiAlert-message"
              >
                You don't have access to any organizations. Please contact your administrator.
              </div>
            </div>
            <ul
              aria-label="Available organizations"
              class="MuiList-root MuiList-padding css-1q05d6r-MuiList-root"
              data-testid="tenant-list"
            />
            <button
              aria-label="Continue with selected organization"
              class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeLarge MuiButton-containedSizeLarge MuiButton-colorPrimary MuiButton-fullWidth Mui-disabled MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeLarge MuiButton-containedSizeLarge MuiButton-colorPrimary MuiButton-fullWidth css-13tpzue-MuiButtonBase-root-MuiButton-root"
              data-testid="tenant-continue-button"
              disabled=""
              tabindex="-1"
              type="button"
            >
              Select Organization
            </button>
          </div>
        </div>
      </div>
    </main>
    <div
      data-testid="tenant-context-probe"
      style="display: none;"
    >
      <span
        data-testid="current-tenant"
      />
      <span
        data-testid="available-count"
      >
        0
      </span>
      <span
        data-testid="tenant-loading"
      >
        0
      </span>
      <span
        data-testid="tenant-error"
      />
      <span
        data-testid="tenant-show-selector"
      >
        0
      </span>
    </div>
  </div>
</body>

Ignored nodes: comments, script, style
<html>
  <head>
    <meta
      content=""
      name="emotion-insertion-point"
    />
  </head>
  <body>
    <div>
      <main
        class="MuiContainer-root MuiContainer-maxWidthSm css-zzzaw2-MuiContainer-root"
        data-testid="tenant-selector-root"
      >
        <div
          class="MuiBox-root css-binzgt"
        >
          <div
            class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-1e2b4v4-MuiPaper-root-MuiCard-root"
            style="--Paper-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);"
          >
            <div
              class="MuiCardContent-root css-21mhzp-MuiCardContent-root"
            >
              <h1
                class="MuiTypography-root MuiTypography-h4 MuiTypography-alignCenter MuiTypography-gutterBottom css-l8ztbh-MuiTypography-root"
                data-testid="tenant-selector-title"
                style="--Typography-textAlign: center;"
              >
                Select Organization
              </h1>
              <p
                class="MuiTypography-root MuiTypography-body1 MuiTypography-alignCenter css-12p21tt-MuiTypography-root"
                data-testid="tenant-selector-subtitle"
                style="--Typography-textAlign: center;"
              >
                You have access to multiple organizations. Please select one to continue.
              </p>
              <div
                class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAlert-root MuiAlert-colorWarning MuiAlert-standardWarning MuiAlert-standard css-1u6i1g1-MuiPaper-root-MuiAlert-root"
                data-testid="tenant-selector-empty"
                role="alert"
                style="--Paper-shadow: none;"
              >
                <div
                  class="MuiAlert-icon css-vab54s-MuiAlert-icon"
                >
                  <svg
                    aria-hidden="true"
                    class="MuiSvgIcon-root MuiSvgIcon-fontSizeInherit css-1ckov0h-MuiSvgIcon-root"
                    data-testid="ReportProblemOutlinedIcon"
                    focusable="false"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"
                    />
                  </svg>
                </div>
                <div
                  class="MuiAlert-message css-zioonp-MuiAlert-message"
                >
                  You don't have access to any organizations. Please contact your administrator.
                </div>
              </div>
              <ul
                aria-label="Available organizations"
                class="MuiList-root MuiList-padding css-1q05d6r-MuiList-root"
                data-testid="tenant-list"
              />
              <button
                aria-label="Continue with selected organization"
                class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeLarge MuiButton-containedSizeLarge MuiButton-colorPrimary MuiButton-fullWidth Mui-disabled MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeLarge MuiButton-containedSizeLarge MuiButton-colorPrimary MuiButton-fullWidth css-13tpzue-MuiButtonBase-root-MuiButton-root"
                data-testid="tenant-continue-button"
                disabled=""
                tabindex="-1"
                type="button"
              >
                Select Organization
              </button>
            </div>
          </div>
        </div>
      </main>
      <div
        data-testid="tenant-context-probe"
        style="display: none;"
      >
        <span
          data-testid="current-tenant"
        />
        <span
          data-testid="available-count"
        >
          0
        </span>
        <span
          data-testid="tenant-loading"
        >
          0
        </span>
        <span
          data-testid="tenant-error"
        />
        <span
          data-testid="tenant-show-selector"
        >
          0
        </span>
      </div>
    </div>
  </body>
</html>...
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx:305:11
    303|
    304|     // Should auto-select and show continue
    305|     await waitFor(() => {
       |           ^
    306|       expect(screen.getByText('Continue')).toBeInTheDocument()
    307|     }, { timeout: 5000 })

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[12/24]â¯

 FAIL  src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx > Two-Phase Authentication Flow > should handle tenant loading errors
 FAIL  src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx > Two-Phase Authentication Flow > should handle tenant loading errors
TestingLibraryElementError: Unable to find an element with the text: /failed to load tenants/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div>
    <main
      class="MuiContainer-root MuiContainer-maxWidthSm css-zzzaw2-MuiContainer-root"
      data-testid="tenant-selector-root"
    >
      <div
        class="MuiBox-root css-binzgt"
      >
        <div
          class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-1e2b4v4-MuiPaper-root-MuiCard-root"
          style="--Paper-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);"
        >
          <div
            class="MuiCardContent-root css-21mhzp-MuiCardContent-root"
          >
            <h1
              class="MuiTypography-root MuiTypography-h4 MuiTypography-alignCenter MuiTypography-gutterBottom css-l8ztbh-MuiTypography-root"
              data-testid="tenant-selector-title"
              style="--Typography-textAlign: center;"
            >
              Select Organization
            </h1>
            <p
              class="MuiTypography-root MuiTypography-body1 MuiTypography-alignCenter css-12p21tt-MuiTypography-root"
              data-testid="tenant-selector-subtitle"
              style="--Typography-textAlign: center;"
            >
              You have access to multiple organizations. Please select one to continue.
            </p>
            <div
              class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAlert-root MuiAlert-colorWarning MuiAlert-standardWarning MuiAlert-standard css-1u6i1g1-MuiPaper-root-MuiAlert-root"
              data-testid="tenant-selector-empty"
              role="alert"
              style="--Paper-shadow: none;"
            >
              <div
                class="MuiAlert-icon css-vab54s-MuiAlert-icon"
              >
                <svg
                  aria-hidden="true"
                  class="MuiSvgIcon-root MuiSvgIcon-fontSizeInherit css-1ckov0h-MuiSvgIcon-root"
                  data-testid="ReportProblemOutlinedIcon"
                  focusable="false"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"
                  />
                </svg>
              </div>
              <div
                class="MuiAlert-message css-zioonp-MuiAlert-message"
              >
                You don't have access to any organizations. Please contact your administrator.
              </div>
            </div>
            <ul
              aria-label="Available organizations"
              class="MuiList-root MuiList-padding css-1q05d6r-MuiList-root"
              data-testid="tenant-list"
            />
            <button
              aria-label="Continue with selected organization"
              class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeLarge MuiButton-containedSizeLarge MuiButton-colorPrimary MuiButton-fullWidth Mui-disabled MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeLarge MuiButton-containedSizeLarge MuiButton-colorPrimary MuiButton-fullWidth css-13tpzue-MuiButtonBase-root-MuiButton-root"
              data-testid="tenant-continue-button"
              disabled=""
              tabindex="-1"
              type="button"
            >
              Select Organization
            </button>
          </div>
        </div>
      </div>
    </main>
    <div
      data-testid="tenant-context-probe"
      style="display: none;"
    >
      <span
        data-testid="current-tenant"
      />
      <span
        data-testid="available-count"
      >
        0
      </span>
      <span
        data-testid="tenant-loading"
      >
        0
      </span>
      <span
        data-testid="tenant-error"
      />
      <span
        data-testid="tenant-show-selector"
      >
        0
      </span>
    </div>
  </div>
</body>

Ignored nodes: comments, script, style
<html>
  <head>
    <meta
      content=""
      name="emotion-insertion-point"
    />
  </head>
  <body>
    <div>
      <main
        class="MuiContainer-root MuiContainer-maxWidthSm css-zzzaw2-MuiContainer-root"
        data-testid="tenant-selector-root"
      >
        <div
          class="MuiBox-root css-binzgt"
        >
          <div
            class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-1e2b4v4-MuiPaper-root-MuiCard-root"
            style="--Paper-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);"
          >
            <div
              class="MuiCardContent-root css-21mhzp-MuiCardContent-root"
            >
              <h1
                class="MuiTypography-root MuiTypography-h4 MuiTypography-alignCenter MuiTypography-gutterBottom css-l8ztbh-MuiTypography-root"
                data-testid="tenant-selector-title"
                style="--Typography-textAlign: center;"
              >
                Select Organization
              </h1>
              <p
                class="MuiTypography-root MuiTypography-body1 MuiTypography-alignCenter css-12p21tt-MuiTypography-root"
                data-testid="tenant-selector-subtitle"
                style="--Typography-textAlign: center;"
              >
                You have access to multiple organizations. Please select one to continue.
              </p>
              <div
                class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAlert-root MuiAlert-colorWarning MuiAlert-standardWarning MuiAlert-standard css-1u6i1g1-MuiPaper-root-MuiAlert-root"
                data-testid="tenant-selector-empty"
                role="alert"
                style="--Paper-shadow: none;"
              >
                <div
                  class="MuiAlert-icon css-vab54s-MuiAlert-icon"
                >
                  <svg
                    aria-hidden="true"
                    class="MuiSvgIcon-root MuiSvgIcon-fontSizeInherit css-1ckov0h-MuiSvgIcon-root"
                    data-testid="ReportProblemOutlinedIcon"
                    focusable="false"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"
                    />
                  </svg>
                </div>
                <div
                  class="MuiAlert-message css-zioonp-MuiAlert-message"
                >
                  You don't have access to any organizations. Please contact your administrator.
                </div>
              </div>
              <ul
                aria-label="Available organizations"
                class="MuiList-root MuiList-padding css-1q05d6r-MuiList-root"
                data-testid="tenant-list"
              />
              <button
                aria-label="Continue with selected organization"
                class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeLarge MuiButton-containedSizeLarge MuiButton-colorPrimary MuiButton-fullWidth Mui-disabled MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeLarge MuiButton-containedSizeLarge MuiButton-colorPrimary MuiButton-fullWidth css-13tpzue-MuiButtonBase-root-MuiButton-root"
                data-testid="tenant-continue-button"
                disabled=""
                tabindex="-1"
                type="button"
              >
                Select Organization
              </button>
            </div>
          </div>
        </div>
      </main>
      <div
        data-testid="tenant-context-probe"
        style="display: none;"
      >
        <span
          data-testid="current-tenant"
        />
        <span
          data-testid="available-count"
        >
          0
        </span>
        <span
          data-testid="tenant-loading"
        >
          0
        </span>
        <span
          data-testid="tenant-error"
        />
        <span
          data-testid="tenant-show-selector"
        >
          0
        </span>
      </div>
    </div>
  </body>
</html>...
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/components/auth/__tests__/TwoPhaseAuthFlow.test.tsx:351:11
    349|     )
    350|
    351|     await waitFor(() => {
       |           ^
    352|       expect(screen.getByText(/failed to load tenants/i)).toBeInTheDocument()
    353|     }, { timeout: 5000 })

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[13/24]â¯

 FAIL  src/components/__tests__/roles/RoleList.test.tsx > RoleList > renders role data
Error: expect(element).not.toBeInTheDocument()

expected document not to contain element, found <p
  class="MuiTypography-root MuiTypography-body1 css-bn546x-MuiTypography-root"
>
  Loading roles for
  Test Tenant
  ...
</p> instead

Ignored nodes: comments, script, style
<html>
  <head>
    <meta
      content=""
      name="emotion-insertion-point"
    />
  </head>
  <body>
    <div>
      <div
        class="MuiBox-root css-qd5mg9"
      >
        <span
          class="MuiCircularProgress-root MuiCircularProgress-indeterminate MuiCircularProgress-colorPrimary css-1wxecgq-MuiCircularProgress-root"
          role="progressbar"
          style="width: 40px; height: 40px;"
        >
          <svg
            class="MuiCircularProgress-svg css-54pwck-MuiCircularProgress-svg"
            viewBox="22 22 44 44"
          >
            <circle
              class="MuiCircularProgress-circle MuiCircularProgress-circleIndeterminate css-19t5dcl-MuiCircularProgress-circle"
              cx="44"
              cy="44"
              fill="none"
              r="20.2"
              stroke-width="3.6"
            />
          </svg>
        </span>
        <p
          class="MuiTypography-root MuiTypography-body1 css-bn546x-MuiTypography-root"
        >
          Loading roles for
          Test Tenant
          ...
        </p>
      </div>
    </div>
  </body>
</html>...
 â¯ src/components/__tests__/roles/RoleList.test.tsx:135:56
    133|
    134|     await waitFor(() => {
    135|       expect(screen.queryByText(/Loading roles/i)).not.toBeInTheDocument();
       |                                                        ^
    136|     });
    137|
 â¯ runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:47:12
 â¯ checkCallback node_modules/@testing-library/dom/dist/wait-for.js:124:77
 â¯ MutationObserver.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:118:16
 â¯ MutationObserver.invokeTheCallbackFunction node_modules/jsdom/lib/jsdom/living/generated/MutationCallback.js:19:26
 â¯ notifyMutationObservers node_modules/jsdom/lib/jsdom/living/helpers/mutation-observers.js:160:22
 â¯ node_modules/jsdom/lib/jsdom/living/helpers/mutation-observers.js:133:5

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[14/24]â¯

 FAIL  src/components/__tests__/roles/RoleList.test.tsx > RoleList > renders role data
Error: expect(element).not.toBeInTheDocument()

expected document not to contain element, found <p
  class="MuiTypography-root MuiTypography-body1 css-bn546x-MuiTypography-root"
>
  Loading roles for
  Test Tenant
  ...
</p> instead

Ignored nodes: comments, script, style
<html>
  <head>
    <meta
      content=""
      name="emotion-insertion-point"
    />
  </head>
  <body>
    <div>
      <div
        class="MuiBox-root css-qd5mg9"
      >
        <span
          class="MuiCircularProgress-root MuiCircularProgress-indeterminate MuiCircularProgress-colorPrimary css-1wxecgq-MuiCircularProgress-root"
          role="progressbar"
          style="width: 40px; height: 40px;"
        >
          <svg
            class="MuiCircularProgress-svg css-54pwck-MuiCircularProgress-svg"
            viewBox="22 22 44 44"
          >
            <circle
              class="MuiCircularProgress-circle MuiCircularProgress-circleIndeterminate css-19t5dcl-MuiCircularProgress-circle"
              cx="44"
              cy="44"
              fill="none"
              r="20.2"
              stroke-width="3.6"
            />
          </svg>
        </span>
        <p
          class="MuiTypography-root MuiTypography-body1 css-bn546x-MuiTypography-root"
        >
          Loading roles for
          Test Tenant
          ...
        </p>
      </div>
    </div>
  </body>
</html>...
 â¯ src/components/__tests__/roles/RoleList.test.tsx:135:56
    133|
    134|     await waitFor(() => {
    135|       expect(screen.queryByText(/Loading roles/i)).not.toBeInTheDocument();
       |                                                        ^
    136|     });
    137|
 â¯ runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:47:12
 â¯ checkCallback node_modules/@testing-library/dom/dist/wait-for.js:124:77
 â¯ Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:118:16

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[15/24]â¯

 Test Files  3 failed | 9 passed (12)
      Tests  12 failed | 82 passed (94)
   Start at  10:47:43
   Duration  102.69s

