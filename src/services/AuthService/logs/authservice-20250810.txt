[2025-08-10 17:31:13.947 -05:00 INF] Starting AuthService {}
[2025-08-10 17:31:14.059 -05:00 INF] Now listening on: https://localhost:7001 {}
[2025-08-10 17:31:14.064 -05:00 INF] Now listening on: http://localhost:5001 {}
[2025-08-10 17:37:12.927 -05:00 WRN] üîç LOGIN DEBUG: Starting login for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:13.618 -05:00 WRN] üîç LOGIN DEBUG: User found: true, IsActive: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:13.622 -05:00 WRN] üîç LOGIN DEBUG: Attempting password verification for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:13.624 -05:00 WRN] üîç LOGIN DEBUG: Password length: 11, Hash starts with: $2a$12$FoF {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:14.626 -05:00 WRN] üîç LOGIN DEBUG: Password verification result: true {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:14.629 -05:00 WRN] üîç LOGIN DEBUG: Checking tenant relationship. PrimaryTenant: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:14.635 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:14.639 -05:00 INF] üîç TOKEN DEBUG: Added role User for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:14.642 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:14.644 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:14.651 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:14.682 -05:00 INF] üîç PERMISSION DEBUG: Found 0 active user roles for user 6 in tenant 1:  {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:14.686 -05:00 WRN] üîç PERMISSION DEBUG: No active user roles found for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:14.689 -05:00 INF] üîç TOKEN DEBUG: Retrieved 0 permissions for user 6:  {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:14.691 -05:00 INF] üîç TOKEN DEBUG: Successfully added 0 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:14.694 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:14.696 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 13 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:14.716 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:14.899 -05:00 INF] User mccrearyforward@gmail.com logged in successfully {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S4:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S4"}
[2025-08-10 17:37:14.932 -05:00 INF] HTTP POST /api/auth/login responded 200 in 3157.2064 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:39:28.211 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S5:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S5"}
[2025-08-10 17:39:28.214 -05:00 WRN] üîç TOKEN DEBUG: No TenantUsers found for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S5:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S5"}
[2025-08-10 17:39:28.216 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S5:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S5"}
[2025-08-10 17:39:28.219 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S5:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S5"}
[2025-08-10 17:39:28.226 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S6:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S6"}
[2025-08-10 17:39:28.227 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S5:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S5"}
[2025-08-10 17:39:28.230 -05:00 WRN] üîç TOKEN DEBUG: No TenantUsers found for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S6:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S6"}
[2025-08-10 17:39:28.235 -05:00 INF] üîç PERMISSION DEBUG: Found 0 active user roles for user 6 in tenant 1:  {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S5:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S5"}
[2025-08-10 17:39:28.235 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S6:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S6"}
[2025-08-10 17:39:28.243 -05:00 WRN] üîç PERMISSION DEBUG: No active user roles found for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S5:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S5"}
[2025-08-10 17:39:28.247 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S6:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S6"}
[2025-08-10 17:39:28.249 -05:00 INF] üîç TOKEN DEBUG: Retrieved 0 permissions for user 6:  {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S5:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S5"}
[2025-08-10 17:39:28.252 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S6:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S6"}
[2025-08-10 17:39:28.265 -05:00 INF] üîç TOKEN DEBUG: Successfully added 0 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S5:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S5"}
[2025-08-10 17:39:28.270 -05:00 INF] üîç PERMISSION DEBUG: Found 0 active user roles for user 6 in tenant 1:  {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S6:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S6"}
[2025-08-10 17:39:28.271 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S5:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S5"}
[2025-08-10 17:39:28.276 -05:00 WRN] üîç PERMISSION DEBUG: No active user roles found for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S6:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S6"}
[2025-08-10 17:39:28.278 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 12 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S5:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S5"}
[2025-08-10 17:39:28.280 -05:00 INF] üîç TOKEN DEBUG: Retrieved 0 permissions for user 6:  {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S6:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S6"}
[2025-08-10 17:39:28.282 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S5:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S5"}
[2025-08-10 17:39:28.286 -05:00 INF] üîç TOKEN DEBUG: Successfully added 0 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S6:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S6"}
[2025-08-10 17:39:28.298 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S6:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S6"}
[2025-08-10 17:39:28.303 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 12 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S6:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S6"}
[2025-08-10 17:39:28.305 -05:00 INF] Token refreshed for user 6 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S5:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S5"}
[2025-08-10 17:39:28.315 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S6:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S6"}
[2025-08-10 17:39:28.329 -05:00 INF] HTTP POST /api/auth/refresh responded 200 in 207.8153 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:39:28.345 -05:00 INF] Token refreshed for user 6 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S6:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S6"}
[2025-08-10 17:39:28.352 -05:00 INF] HTTP POST /api/auth/refresh responded 200 in 231.1079 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:41:08.463 -05:00 WRN] üîç LOGIN DEBUG: Starting login for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:08.475 -05:00 WRN] üîç LOGIN DEBUG: User found: true, IsActive: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:08.478 -05:00 WRN] üîç LOGIN DEBUG: Attempting password verification for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:08.481 -05:00 WRN] üîç LOGIN DEBUG: Password length: 11, Hash starts with: $2a$12$FoF {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:08.937 -05:00 WRN] üîç LOGIN DEBUG: Password verification result: true {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:08.941 -05:00 WRN] üîç LOGIN DEBUG: Checking tenant relationship. PrimaryTenant: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:08.944 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:08.950 -05:00 INF] üîç TOKEN DEBUG: Added role User for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:08.956 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:08.959 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:08.964 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:08.973 -05:00 INF] üîç PERMISSION DEBUG: Found 0 active user roles for user 6 in tenant 1:  {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:08.977 -05:00 WRN] üîç PERMISSION DEBUG: No active user roles found for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:08.981 -05:00 INF] üîç TOKEN DEBUG: Retrieved 0 permissions for user 6:  {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:08.985 -05:00 INF] üîç TOKEN DEBUG: Successfully added 0 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:08.989 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:08.991 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 13 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:08.996 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:09.013 -05:00 INF] User mccrearyforward@gmail.com logged in successfully {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S7:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7S7"}
[2025-08-10 17:41:09.018 -05:00 INF] HTTP POST /api/auth/login responded 200 in 569.3984 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:43:31.334 -05:00 WRN] üîç LOGIN DEBUG: Starting login for admin@localhost {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.358 -05:00 WRN] üîç LOGIN DEBUG: User found: true, IsActive: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.363 -05:00 WRN] üîç LOGIN DEBUG: Attempting password verification for admin@localhost {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.366 -05:00 WRN] üîç LOGIN DEBUG: Password length: 8, Hash starts with: $2a$12$29x {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.778 -05:00 WRN] üîç LOGIN DEBUG: Password verification result: true {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.783 -05:00 WRN] üîç LOGIN DEBUG: Checking tenant relationship. PrimaryTenant: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.786 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 2 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.790 -05:00 INF] üîç TOKEN DEBUG: Added role SuperAdmin for user 2 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.793 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 2 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.795 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 2 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.800 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 2 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.817 -05:00 INF] üîç PERMISSION DEBUG: Found 2 active user roles for user 2 in tenant 1: 7,10 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.889 -05:00 INF] üîç PERMISSION DEBUG: Found 27 role permissions for roles 7,10 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.907 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 2 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.912 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 2: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.915 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 2 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.919 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.922 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 35 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.926 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 2 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.949 -05:00 INF] User admin@localhost logged in successfully {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7S8:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7S8"}
[2025-08-10 17:43:31.953 -05:00 INF] HTTP POST /api/Auth/login responded 200 in 620.0286 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:48:36.427 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:48:36.431 -05:00 WRN] üîç TOKEN DEBUG: No TenantUsers found for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:48:36.434 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:48:36.437 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:48:36.442 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:48:36.448 -05:00 INF] üîç PERMISSION DEBUG: Found 1 active user roles for user 6 in tenant 1: 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:48:36.454 -05:00 INF] üîç PERMISSION DEBUG: Found 22 role permissions for roles 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:48:36.460 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 6 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:48:36.464 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 6: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:48:36.467 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:48:36.470 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:48:36.473 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 34 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:48:36.476 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:48:36.492 -05:00 INF] Token refreshed for user 6 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:48:36.496 -05:00 INF] HTTP POST /api/auth/refresh responded 200 in 93.3719 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:49:10.973 -05:00 WRN] üîç LOGIN DEBUG: Starting login for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:10.983 -05:00 WRN] üîç LOGIN DEBUG: User found: true, IsActive: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:10.988 -05:00 WRN] üîç LOGIN DEBUG: Attempting password verification for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:10.991 -05:00 WRN] üîç LOGIN DEBUG: Password length: 11, Hash starts with: $2a$12$FoF {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:11.448 -05:00 WRN] üîç LOGIN DEBUG: Password verification result: true {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:11.452 -05:00 WRN] üîç LOGIN DEBUG: Checking tenant relationship. PrimaryTenant: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:11.456 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:11.458 -05:00 INF] üîç TOKEN DEBUG: Added role User for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:11.461 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:11.463 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:11.466 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:11.473 -05:00 INF] üîç PERMISSION DEBUG: Found 1 active user roles for user 6 in tenant 1: 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:11.477 -05:00 INF] üîç PERMISSION DEBUG: Found 22 role permissions for roles 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:11.483 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 6 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:11.487 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 6: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:11.491 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:11.495 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:11.498 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 35 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:11.501 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:11.509 -05:00 INF] User mccrearyforward@gmail.com logged in successfully {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:11.512 -05:00 INF] HTTP POST /api/auth/login responded 200 in 540.2243 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:49:16.022 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000002","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:16.025 -05:00 WRN] üîç TOKEN DEBUG: No TenantUsers found for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000002","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:16.030 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000002","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:16.032 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:16.033 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000002","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:16.038 -05:00 WRN] üîç TOKEN DEBUG: No TenantUsers found for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:16.040 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000002","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:16.044 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:16.050 -05:00 INF] üîç PERMISSION DEBUG: Found 1 active user roles for user 6 in tenant 1: 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000002","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:16.051 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:16.058 -05:00 INF] üîç PERMISSION DEBUG: Found 22 role permissions for roles 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000002","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:16.058 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:16.062 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 6 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000002","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:16.063 -05:00 INF] üîç PERMISSION DEBUG: Found 1 active user roles for user 6 in tenant 1: 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:16.064 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 6: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000002","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:16.068 -05:00 INF] üîç PERMISSION DEBUG: Found 22 role permissions for roles 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:16.073 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000002","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:16.076 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 6 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:16.077 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000002","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:16.078 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 6: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:16.081 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 34 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000002","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:16.085 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:16.088 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000002","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:16.090 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:16.095 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 34 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:16.097 -05:00 INF] Token refreshed for user 6 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000002","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:16.098 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:16.100 -05:00 INF] HTTP POST /api/auth/refresh responded 200 in 82.7780 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:49:16.107 -05:00 INF] Token refreshed for user 6 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000001","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:16.111 -05:00 INF] HTTP POST /api/auth/refresh responded 200 in 82.8069 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:49:18.254 -05:00 WRN] Invalid refresh token used: 8oPhrS+P8JY2ENSyp6reMuPJz4g7XRRhV5jsig17FnPx/wRI3pCgkJWx+suB2kWFR57wVPlauX5D7baGIzVqkw== {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000002","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:18.259 -05:00 INF] HTTP POST /api/auth/refresh responded 400 in 10.8741 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:49:18.274 -05:00 WRN] Invalid refresh token used: 8oPhrS+P8JY2ENSyp6reMuPJz4g7XRRhV5jsig17FnPx/wRI3pCgkJWx+suB2kWFR57wVPlauX5D7baGIzVqkw== {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:18.278 -05:00 INF] HTTP POST /api/auth/refresh responded 400 in 28.9966 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:49:34.230 -05:00 WRN] üîç LOGIN DEBUG: Starting login for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.238 -05:00 WRN] üîç LOGIN DEBUG: User found: true, IsActive: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.242 -05:00 WRN] üîç LOGIN DEBUG: Attempting password verification for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.247 -05:00 WRN] üîç LOGIN DEBUG: Password length: 11, Hash starts with: $2a$12$FoF {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.769 -05:00 WRN] üîç LOGIN DEBUG: Password verification result: true {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.773 -05:00 WRN] üîç LOGIN DEBUG: Checking tenant relationship. PrimaryTenant: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.777 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.781 -05:00 INF] üîç TOKEN DEBUG: Added role User for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.783 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.787 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.790 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.798 -05:00 INF] üîç PERMISSION DEBUG: Found 1 active user roles for user 6 in tenant 1: 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.803 -05:00 INF] üîç PERMISSION DEBUG: Found 22 role permissions for roles 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.809 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 6 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.813 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 6: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.816 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.820 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.824 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 35 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.828 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.836 -05:00 INF] User mccrearyforward@gmail.com logged in successfully {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:34.839 -05:00 INF] HTTP POST /api/auth/login responded 200 in 610.5564 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:49:34.985 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:34.985 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:34.990 -05:00 WRN] üîç TOKEN DEBUG: No TenantUsers found for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:34.994 -05:00 WRN] üîç TOKEN DEBUG: No TenantUsers found for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:34.998 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:35.004 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:35.009 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:35.017 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:35.019 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:35.021 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:35.024 -05:00 INF] üîç PERMISSION DEBUG: Found 1 active user roles for user 6 in tenant 1: 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:35.026 -05:00 INF] üîç PERMISSION DEBUG: Found 1 active user roles for user 6 in tenant 1: 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:35.028 -05:00 INF] üîç PERMISSION DEBUG: Found 22 role permissions for roles 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:35.032 -05:00 INF] üîç PERMISSION DEBUG: Found 22 role permissions for roles 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:35.035 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 6 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:35.037 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 6 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:35.039 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 6: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:35.044 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 6: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:35.050 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:35.053 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:35.056 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:35.060 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:35.064 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 34 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:35.067 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 34 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:35.071 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:35.075 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:35.092 -05:00 INF] Token refreshed for user 6 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:35.094 -05:00 INF] Token refreshed for user 6 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:35.095 -05:00 INF] HTTP POST /api/auth/refresh responded 200 in 114.8509 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:49:35.098 -05:00 INF] HTTP POST /api/auth/refresh responded 200 in 116.9031 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:49:43.416 -05:00 WRN] Invalid refresh token used: JbRyFK4teOgDtAqGVmVDVLigkTuxLgN7Nq8+cRDEheEbxsWurbx9LPj/683WiKXqKcvmunzIetkLDTVncRJjIw== {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:49:43.416 -05:00 WRN] Invalid refresh token used: JbRyFK4teOgDtAqGVmVDVLigkTuxLgN7Nq8+cRDEheEbxsWurbx9LPj/683WiKXqKcvmunzIetkLDTVncRJjIw== {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000005","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:49:43.420 -05:00 INF] HTTP POST /api/auth/refresh responded 400 in 8.1365 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:49:43.424 -05:00 INF] HTTP POST /api/auth/refresh responded 400 in 10.4311 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:49:57.794 -05:00 WRN] üîç LOGIN DEBUG: Starting login for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:57.802 -05:00 WRN] üîç LOGIN DEBUG: User found: true, IsActive: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:57.807 -05:00 WRN] üîç LOGIN DEBUG: Attempting password verification for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:57.811 -05:00 WRN] üîç LOGIN DEBUG: Password length: 11, Hash starts with: $2a$12$FoF {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:58.259 -05:00 WRN] üîç LOGIN DEBUG: Password verification result: true {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:58.264 -05:00 WRN] üîç LOGIN DEBUG: Checking tenant relationship. PrimaryTenant: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:58.266 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:58.268 -05:00 INF] üîç TOKEN DEBUG: Added role User for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:58.270 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:58.272 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:58.274 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:58.280 -05:00 INF] üîç PERMISSION DEBUG: Found 1 active user roles for user 6 in tenant 1: 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:58.285 -05:00 INF] üîç PERMISSION DEBUG: Found 22 role permissions for roles 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:58.291 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 6 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:58.297 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 6: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:58.300 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:58.305 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:58.309 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 35 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:58.314 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:58.328 -05:00 INF] User mccrearyforward@gmail.com logged in successfully {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SA:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SA"}
[2025-08-10 17:49:58.332 -05:00 INF] HTTP POST /api/auth/login responded 200 in 538.6050 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:50:15.330 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000005","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:50:15.330 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000006","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:50:15.334 -05:00 WRN] üîç TOKEN DEBUG: No TenantUsers found for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000005","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:50:15.338 -05:00 WRN] üîç TOKEN DEBUG: No TenantUsers found for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000006","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:50:15.341 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000005","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:50:15.342 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000006","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:50:15.345 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000005","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:50:15.348 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000006","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:50:15.351 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000005","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:50:15.355 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000006","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:50:15.359 -05:00 INF] üîç PERMISSION DEBUG: Found 1 active user roles for user 6 in tenant 1: 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000005","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:50:15.361 -05:00 INF] üîç PERMISSION DEBUG: Found 1 active user roles for user 6 in tenant 1: 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000006","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:50:15.364 -05:00 INF] üîç PERMISSION DEBUG: Found 22 role permissions for roles 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000005","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:50:15.368 -05:00 INF] üîç PERMISSION DEBUG: Found 22 role permissions for roles 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000006","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:50:15.371 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 6 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000005","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:50:15.375 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 6 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000006","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:50:15.377 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 6: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000005","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:50:15.380 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 6: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000006","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:50:15.383 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000005","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:50:15.388 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000006","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:50:15.391 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000005","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:50:15.395 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000006","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:50:15.398 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 34 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000005","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:50:15.402 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 34 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000006","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:50:15.405 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000005","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:50:15.407 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000006","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:50:15.415 -05:00 INF] Token refreshed for user 6 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7SB:00000005","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7SB"}
[2025-08-10 17:50:15.417 -05:00 INF] Token refreshed for user 6 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"0bbd8120-9fab-40f0-ad9e-732c1f9e0239","ActionName":"AuthService.Controllers.AuthController.RefreshToken (AuthService)","RequestId":"0HNEOBPP8O7S9:00000006","RequestPath":"/api/auth/refresh","ConnectionId":"0HNEOBPP8O7S9"}
[2025-08-10 17:50:15.418 -05:00 INF] HTTP POST /api/auth/refresh responded 200 in 90.1671 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:50:15.420 -05:00 INF] HTTP POST /api/auth/refresh responded 200 in 93.4827 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 17:58:07.912 -05:00 WRN] üîç LOGIN DEBUG: Starting login for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:07.936 -05:00 WRN] üîç LOGIN DEBUG: User found: true, IsActive: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:07.939 -05:00 WRN] üîç LOGIN DEBUG: Attempting password verification for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:07.942 -05:00 WRN] üîç LOGIN DEBUG: Password length: 11, Hash starts with: $2a$12$FoF {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:08.422 -05:00 WRN] üîç LOGIN DEBUG: Password verification result: true {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:08.425 -05:00 WRN] üîç LOGIN DEBUG: Checking tenant relationship. PrimaryTenant: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:08.428 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:08.431 -05:00 INF] üîç TOKEN DEBUG: Added role User for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:08.433 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:08.435 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:08.442 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:08.449 -05:00 INF] üîç PERMISSION DEBUG: Found 1 active user roles for user 6 in tenant 1: 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:08.456 -05:00 INF] üîç PERMISSION DEBUG: Found 22 role permissions for roles 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:08.462 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 6 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:08.465 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 6: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:08.469 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:08.473 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:08.476 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 35 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:08.478 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:08.494 -05:00 INF] User mccrearyforward@gmail.com logged in successfully {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SC:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SC"}
[2025-08-10 17:58:08.498 -05:00 INF] HTTP POST /api/auth/login responded 200 in 588.3561 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 18:14:53.940 -05:00 INF] HTTP GET /health responded 200 in 4.8948 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 18:18:31.704 -05:00 WRN] üîç LOGIN DEBUG: Starting login for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:31.734 -05:00 WRN] üîç LOGIN DEBUG: User found: true, IsActive: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:31.738 -05:00 WRN] üîç LOGIN DEBUG: Attempting password verification for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:31.741 -05:00 WRN] üîç LOGIN DEBUG: Password length: 11, Hash starts with: $2a$12$FoF {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:32.140 -05:00 WRN] üîç LOGIN DEBUG: Password verification result: true {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:32.144 -05:00 WRN] üîç LOGIN DEBUG: Checking tenant relationship. PrimaryTenant: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:32.147 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:32.150 -05:00 INF] üîç TOKEN DEBUG: Added role User for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:32.152 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:32.155 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:32.160 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:32.166 -05:00 INF] üîç PERMISSION DEBUG: Found 1 active user roles for user 6 in tenant 1: 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:32.172 -05:00 INF] üîç PERMISSION DEBUG: Found 22 role permissions for roles 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:32.179 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 6 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:32.183 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 6: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:32.186 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:32.189 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:32.193 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 35 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:32.196 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:32.212 -05:00 INF] User mccrearyforward@gmail.com logged in successfully {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SF:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SF"}
[2025-08-10 18:18:32.215 -05:00 INF] HTTP POST /api/auth/login responded 200 in 512.8155 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 19:02:28.279 -05:00 WRN] üîç LOGIN DEBUG: Starting login for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.351 -05:00 WRN] üîç LOGIN DEBUG: User found: true, IsActive: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.356 -05:00 WRN] üîç LOGIN DEBUG: Attempting password verification for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.359 -05:00 WRN] üîç LOGIN DEBUG: Password length: 11, Hash starts with: $2a$12$FoF {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.788 -05:00 WRN] üîç LOGIN DEBUG: Password verification result: true {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.796 -05:00 WRN] üîç LOGIN DEBUG: Checking tenant relationship. PrimaryTenant: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.800 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.803 -05:00 INF] üîç TOKEN DEBUG: Added role User for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.805 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.808 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.811 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.818 -05:00 INF] üîç PERMISSION DEBUG: Found 1 active user roles for user 6 in tenant 1: 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.824 -05:00 INF] üîç PERMISSION DEBUG: Found 22 role permissions for roles 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.831 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 6 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.835 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 6: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.839 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.842 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.845 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 35 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.848 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.870 -05:00 INF] User mccrearyforward@gmail.com logged in successfully {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SH:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SH"}
[2025-08-10 19:02:28.875 -05:00 INF] HTTP POST /api/auth/login responded 200 in 602.9771 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 19:03:50.413 -05:00 WRN] üîç LOGIN DEBUG: Starting login for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SI:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SI"}
[2025-08-10 19:03:50.421 -05:00 WRN] üîç LOGIN DEBUG: User found: true, IsActive: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SI:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SI"}
[2025-08-10 19:03:50.427 -05:00 WRN] üîç LOGIN DEBUG: Attempting password verification for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SI:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SI"}
[2025-08-10 19:03:50.431 -05:00 WRN] üîç LOGIN DEBUG: Password length: 12, Hash starts with: $2a$12$FoF {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SI:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SI"}
[2025-08-10 19:03:50.950 -05:00 WRN] üîç LOGIN DEBUG: Password verification result: false {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SI:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SI"}
[2025-08-10 19:03:50.966 -05:00 INF] HTTP POST /api/auth/login responded 400 in 588.5233 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 19:03:54.106 -05:00 WRN] üîç LOGIN DEBUG: Starting login for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.111 -05:00 WRN] üîç LOGIN DEBUG: User found: true, IsActive: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.113 -05:00 WRN] üîç LOGIN DEBUG: Attempting password verification for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.115 -05:00 WRN] üîç LOGIN DEBUG: Password length: 11, Hash starts with: $2a$12$FoF {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.537 -05:00 WRN] üîç LOGIN DEBUG: Password verification result: true {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.540 -05:00 WRN] üîç LOGIN DEBUG: Checking tenant relationship. PrimaryTenant: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.543 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.546 -05:00 INF] üîç TOKEN DEBUG: Added role User for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.550 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.555 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.557 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.561 -05:00 INF] üîç PERMISSION DEBUG: Found 1 active user roles for user 6 in tenant 1: 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.564 -05:00 INF] üîç PERMISSION DEBUG: Found 22 role permissions for roles 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.569 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 6 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.571 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 6: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.573 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.575 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.576 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 35 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.578 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.596 -05:00 INF] User mccrearyforward@gmail.com logged in successfully {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SJ:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SJ"}
[2025-08-10 19:03:54.598 -05:00 INF] HTTP POST /api/auth/login responded 200 in 494.0825 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 19:06:54.003 -05:00 WRN] üîç LOGIN DEBUG: Starting login for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.018 -05:00 WRN] üîç LOGIN DEBUG: User found: true, IsActive: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.023 -05:00 WRN] üîç LOGIN DEBUG: Attempting password verification for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.025 -05:00 WRN] üîç LOGIN DEBUG: Password length: 11, Hash starts with: $2a$12$FoF {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.448 -05:00 WRN] üîç LOGIN DEBUG: Password verification result: true {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.460 -05:00 WRN] üîç LOGIN DEBUG: Checking tenant relationship. PrimaryTenant: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.474 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.479 -05:00 INF] üîç TOKEN DEBUG: Added role User for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.483 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.489 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.491 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.496 -05:00 INF] üîç PERMISSION DEBUG: Found 1 active user roles for user 6 in tenant 1: 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.500 -05:00 INF] üîç PERMISSION DEBUG: Found 22 role permissions for roles 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.505 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 6 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.508 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 6: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.510 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.512 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.514 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 35 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.516 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.524 -05:00 INF] User mccrearyforward@gmail.com logged in successfully {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SK:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNEOBPP8O7SK"}
[2025-08-10 19:06:54.527 -05:00 INF] HTTP POST /api/auth/login responded 200 in 525.4360 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 19:15:15.139 -05:00 WRN] üîç LOGIN DEBUG: Starting login for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.185 -05:00 WRN] üîç LOGIN DEBUG: User found: true, IsActive: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.188 -05:00 WRN] üîç LOGIN DEBUG: Attempting password verification for mccrearyforward@gmail.com {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.193 -05:00 WRN] üîç LOGIN DEBUG: Password length: 11, Hash starts with: $2a$12$FoF {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.605 -05:00 WRN] üîç LOGIN DEBUG: Password verification result: true {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.609 -05:00 WRN] üîç LOGIN DEBUG: Checking tenant relationship. PrimaryTenant: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.612 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.615 -05:00 INF] üîç TOKEN DEBUG: Added role User for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.619 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.621 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 6 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.623 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.628 -05:00 INF] üîç PERMISSION DEBUG: Found 1 active user roles for user 6 in tenant 1: 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.632 -05:00 INF] üîç PERMISSION DEBUG: Found 22 role permissions for roles 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.637 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 6 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.639 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 6: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.641 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.643 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.645 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 35 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.648 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 6 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.669 -05:00 INF] User mccrearyforward@gmail.com logged in successfully {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:15:15.673 -05:00 INF] HTTP POST /api/Auth/login responded 200 in 535.1919 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-10 19:17:26.126 -05:00 WRN] üîç LOGIN DEBUG: Starting login for admin@localhost {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.133 -05:00 WRN] üîç LOGIN DEBUG: User found: true, IsActive: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.138 -05:00 WRN] üîç LOGIN DEBUG: Attempting password verification for admin@localhost {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.142 -05:00 WRN] üîç LOGIN DEBUG: Password length: 8, Hash starts with: $2a$12$29x {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.574 -05:00 WRN] üîç LOGIN DEBUG: Password verification result: true {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.580 -05:00 WRN] üîç LOGIN DEBUG: Checking tenant relationship. PrimaryTenant: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.585 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 2 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.589 -05:00 INF] üîç TOKEN DEBUG: Added role SuperAdmin for user 2 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.595 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 2 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.597 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 2 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.600 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 2 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.604 -05:00 INF] üîç PERMISSION DEBUG: Found 2 active user roles for user 2 in tenant 1: 7,10 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.614 -05:00 INF] üîç PERMISSION DEBUG: Found 27 role permissions for roles 7,10 {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.620 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 2 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.624 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 2: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.627 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 2 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.630 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.633 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 35 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.637 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 2 {"SourceContext":"AuthService.Services.TokenService","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.657 -05:00 INF] User admin@localhost logged in successfully {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"a35c15e1-3325-4c98-b6c5-1c8c5b888024","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEOBPP8O7SL:00000005","RequestPath":"/api/Auth/login","ConnectionId":"0HNEOBPP8O7SL"}
[2025-08-10 19:17:26.669 -05:00 INF] HTTP POST /api/Auth/login responded 200 in 543.8262 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
