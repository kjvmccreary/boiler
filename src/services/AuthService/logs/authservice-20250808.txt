[2025-08-08 09:38:40.693 -05:00 INF] Starting AuthService {}
[2025-08-08 10:08:48.915 -05:00 WRN] üîç LOGIN DEBUG: Starting login for admin@localhost {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:49.520 -05:00 WRN] üîç LOGIN DEBUG: User found: true, IsActive: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:49.524 -05:00 WRN] üîç LOGIN DEBUG: Attempting password verification for admin@localhost {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:49.526 -05:00 WRN] üîç LOGIN DEBUG: Password length: 8, Hash starts with: $2a$12$29x {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:50.499 -05:00 WRN] üîç LOGIN DEBUG: Password verification result: true {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:50.501 -05:00 WRN] üîç LOGIN DEBUG: Checking tenant relationship. PrimaryTenant: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:50.508 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 2 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:50.517 -05:00 INF] üîç TOKEN DEBUG: Added role SuperAdmin for user 2 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:50.521 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 2 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:50.525 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 2 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:50.531 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 2 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:50.563 -05:00 INF] üîç PERMISSION DEBUG: Found 1 user roles for user 2 in tenant 1: 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:50.618 -05:00 INF] üîç PERMISSION DEBUG: Found 22 role permissions for roles 7 {"SourceContext":"Common.Services.PermissionService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:50.630 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 2 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:50.632 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 2: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:50.634 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 2 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:50.636 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:50.637 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 35 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:50.655 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 2 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:51.348 -05:00 INF] User admin@localhost logged in successfully {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF0:00000003","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF0"}
[2025-08-08 10:08:51.363 -05:00 INF] HTTP POST /api/Auth/login responded 200 in 3369.2966 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 10:26:33.718 -05:00 WRN] üîç LOGIN DEBUG: Starting login for admin@localhost {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:33.774 -05:00 WRN] üîç LOGIN DEBUG: User found: true, IsActive: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:33.785 -05:00 WRN] üîç LOGIN DEBUG: Attempting password verification for admin@localhost {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:33.791 -05:00 WRN] üîç LOGIN DEBUG: Password length: 8, Hash starts with: $2a$12$29x {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:34.337 -05:00 WRN] üîç LOGIN DEBUG: Password verification result: true {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:34.347 -05:00 WRN] üîç LOGIN DEBUG: Checking tenant relationship. PrimaryTenant: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:34.351 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 2 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:34.354 -05:00 INF] üîç TOKEN DEBUG: Added role SuperAdmin for user 2 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:34.357 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 2 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:34.358 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 2 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:34.362 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 2 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:34.368 -05:00 INF] üîç PERMISSION DEBUG: Found 2 user roles for user 2 in tenant 1: 7,10 {"SourceContext":"Common.Services.PermissionService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:34.373 -05:00 INF] üîç PERMISSION DEBUG: Found 27 role permissions for roles 7,10 {"SourceContext":"Common.Services.PermissionService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:34.377 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 2 in tenant 1: [reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view, tenants.create, tenants.delete, tenants.edit, tenants.manage_settings, tenants.view, tenants.view_all, users.create, users.delete, users.edit, users.manage_roles, users.view, users.view_all] {"SourceContext":"Common.Services.PermissionService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:34.380 -05:00 INF] üîç TOKEN DEBUG: Retrieved 22 permissions for user 2: reports.create, reports.export, reports.schedule, reports.view, roles.assign_users, roles.create, roles.delete, roles.edit, roles.manage_permissions, roles.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:34.382 -05:00 INF] üîç TOKEN DEBUG: Successfully added 22 permission claims to JWT for user 2 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:34.384 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:34.387 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 35 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:34.389 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 2 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:34.405 -05:00 INF] User admin@localhost logged in successfully {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000007","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:26:34.408 -05:00 INF] HTTP POST /api/Auth/login responded 200 in 734.3133 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 10:27:01.461 -05:00 INF] HTTP GET /api/Auth/permissions responded 200 in 88.5479 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 10:27:09.639 -05:00 INF] HTTP GET /api/Auth/roles responded 200 in 15.8134 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 10:28:17.415 -05:00 INF] HTTP GET /api/Auth/permissions responded 401 in 5.9764 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 10:28:24.511 -05:00 INF] HTTP GET /api/Auth/roles responded 401 in 0.4210 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 10:30:25.404 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 5 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"2e4f1077-ee80-4817-b872-1e2551ef2635","ActionName":"AuthService.Controllers.AuthController.Register (AuthService)","RequestId":"0HNEMH6C1LTF1:00000011","RequestPath":"/api/Auth/register","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:30:25.406 -05:00 INF] üîç TOKEN DEBUG: Added role User for user 5 {"SourceContext":"AuthService.Services.TokenService","ActionId":"2e4f1077-ee80-4817-b872-1e2551ef2635","ActionName":"AuthService.Controllers.AuthController.Register (AuthService)","RequestId":"0HNEMH6C1LTF1:00000011","RequestPath":"/api/Auth/register","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:30:25.408 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 5 {"SourceContext":"AuthService.Services.TokenService","ActionId":"2e4f1077-ee80-4817-b872-1e2551ef2635","ActionName":"AuthService.Controllers.AuthController.Register (AuthService)","RequestId":"0HNEMH6C1LTF1:00000011","RequestPath":"/api/Auth/register","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:30:25.410 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 5 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"2e4f1077-ee80-4817-b872-1e2551ef2635","ActionName":"AuthService.Controllers.AuthController.Register (AuthService)","RequestId":"0HNEMH6C1LTF1:00000011","RequestPath":"/api/Auth/register","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:30:25.412 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 5 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"2e4f1077-ee80-4817-b872-1e2551ef2635","ActionName":"AuthService.Controllers.AuthController.Register (AuthService)","RequestId":"0HNEMH6C1LTF1:00000011","RequestPath":"/api/Auth/register","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:30:25.417 -05:00 INF] üîç PERMISSION DEBUG: Found 0 user roles for user 5 in tenant 1:  {"SourceContext":"Common.Services.PermissionService","ActionId":"2e4f1077-ee80-4817-b872-1e2551ef2635","ActionName":"AuthService.Controllers.AuthController.Register (AuthService)","RequestId":"0HNEMH6C1LTF1:00000011","RequestPath":"/api/Auth/register","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:30:25.420 -05:00 WRN] üîç PERMISSION DEBUG: No user roles found for user 5 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"2e4f1077-ee80-4817-b872-1e2551ef2635","ActionName":"AuthService.Controllers.AuthController.Register (AuthService)","RequestId":"0HNEMH6C1LTF1:00000011","RequestPath":"/api/Auth/register","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:30:25.421 -05:00 INF] üîç TOKEN DEBUG: Retrieved 0 permissions for user 5:  {"SourceContext":"AuthService.Services.TokenService","ActionId":"2e4f1077-ee80-4817-b872-1e2551ef2635","ActionName":"AuthService.Controllers.AuthController.Register (AuthService)","RequestId":"0HNEMH6C1LTF1:00000011","RequestPath":"/api/Auth/register","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:30:25.423 -05:00 INF] üîç TOKEN DEBUG: Successfully added 0 permission claims to JWT for user 5 {"SourceContext":"AuthService.Services.TokenService","ActionId":"2e4f1077-ee80-4817-b872-1e2551ef2635","ActionName":"AuthService.Controllers.AuthController.Register (AuthService)","RequestId":"0HNEMH6C1LTF1:00000011","RequestPath":"/api/Auth/register","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:30:25.426 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"2e4f1077-ee80-4817-b872-1e2551ef2635","ActionName":"AuthService.Controllers.AuthController.Register (AuthService)","RequestId":"0HNEMH6C1LTF1:00000011","RequestPath":"/api/Auth/register","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:30:25.428 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 13 {"SourceContext":"AuthService.Services.TokenService","ActionId":"2e4f1077-ee80-4817-b872-1e2551ef2635","ActionName":"AuthService.Controllers.AuthController.Register (AuthService)","RequestId":"0HNEMH6C1LTF1:00000011","RequestPath":"/api/Auth/register","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:30:25.431 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 5 {"SourceContext":"AuthService.Services.TokenService","ActionId":"2e4f1077-ee80-4817-b872-1e2551ef2635","ActionName":"AuthService.Controllers.AuthController.Register (AuthService)","RequestId":"0HNEMH6C1LTF1:00000011","RequestPath":"/api/Auth/register","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:30:25.444 -05:00 INF] User kevin@localhost registered successfully {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"2e4f1077-ee80-4817-b872-1e2551ef2635","ActionName":"AuthService.Controllers.AuthController.Register (AuthService)","RequestId":"0HNEMH6C1LTF1:00000011","RequestPath":"/api/Auth/register","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:30:25.446 -05:00 INF] HTTP POST /api/Auth/register responded 200 in 478.9894 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 10:32:50.019 -05:00 WRN] üîç LOGIN DEBUG: Starting login for kevin@localhost {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.044 -05:00 WRN] üîç LOGIN DEBUG: User found: true, IsActive: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.048 -05:00 WRN] üîç LOGIN DEBUG: Attempting password verification for kevin@localhost {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.051 -05:00 WRN] üîç LOGIN DEBUG: Password length: 8, Hash starts with: $2a$12$v6u {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.488 -05:00 WRN] üîç LOGIN DEBUG: Password verification result: true {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.490 -05:00 WRN] üîç LOGIN DEBUG: Checking tenant relationship. PrimaryTenant: true, TenantId: 1 {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.493 -05:00 INF] üîç TOKEN DEBUG: Starting token generation for user 5 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.495 -05:00 INF] üîç TOKEN DEBUG: Added role User for user 5 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.497 -05:00 INF] üîç TOKEN DEBUG: Attempting to resolve IPermissionService for user 5 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.499 -05:00 INF] üîç TOKEN DEBUG: IPermissionService resolved successfully, getting permissions for user 5 in tenant 1 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.502 -05:00 INF] üîç PERMISSION DEBUG: Getting permissions for user 5 in tenant 1 {"SourceContext":"Common.Services.PermissionService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.507 -05:00 INF] üîç PERMISSION DEBUG: Found 1 user roles for user 5 in tenant 1: 8 {"SourceContext":"Common.Services.PermissionService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.513 -05:00 INF] üîç PERMISSION DEBUG: Found 2 role permissions for roles 8 {"SourceContext":"Common.Services.PermissionService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.518 -05:00 INF] üîç PERMISSION DEBUG: Final permissions for user 5 in tenant 1: [reports.view, users.view] {"SourceContext":"Common.Services.PermissionService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.521 -05:00 INF] üîç TOKEN DEBUG: Retrieved 2 permissions for user 5: reports.view, users.view {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.523 -05:00 INF] üîç TOKEN DEBUG: Successfully added 2 permission claims to JWT for user 5 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.525 -05:00 INF] üîç TOKEN DEBUG: Added test permission claim {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.526 -05:00 INF] üîç TOKEN DEBUG: Total claims count before token generation: 15 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.530 -05:00 INF] üîç TOKEN DEBUG: Token generation completed for user 5 {"SourceContext":"AuthService.Services.TokenService","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.539 -05:00 INF] User kevin@localhost logged in successfully {"SourceContext":"AuthService.Services.AuthServiceImplementation","ActionId":"80465529-2009-4d67-9e1f-1de261831f31","ActionName":"AuthService.Controllers.AuthController.Login (AuthService)","RequestId":"0HNEMH6C1LTF1:00000013","RequestPath":"/api/Auth/login","ConnectionId":"0HNEMH6C1LTF1"}
[2025-08-08 10:32:50.542 -05:00 INF] HTTP POST /api/Auth/login responded 200 in 525.1781 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 15:59:01.615 -05:00 INF] Starting AuthService {}
[2025-08-08 16:07:43.401 -05:00 INF] Starting AuthService {}
[2025-08-08 16:07:43.476 -05:00 INF] Now listening on: https://localhost:7001 {}
[2025-08-08 16:07:43.482 -05:00 INF] Now listening on: http://localhost:5001 {}
[2025-08-08 16:07:43.795 -05:00 INF] HTTP GET /health responded 307 in 1.4253 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 16:07:43.863 -05:00 INF] HTTP GET /health responded 200 in 39.1245 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 16:08:13.713 -05:00 INF] HTTP GET /health responded 307 in 0.3491 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 16:08:13.733 -05:00 INF] HTTP GET /health responded 200 in 7.6971 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 16:08:43.742 -05:00 INF] HTTP GET /health responded 307 in 0.0419 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 16:08:43.757 -05:00 INF] HTTP GET /health responded 200 in 1.7999 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 16:08:47.755 -05:00 INF] HTTP GET /health responded 307 in 0.0366 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 16:08:57.363 -05:00 INF] HTTP GET /health responded 200 in 0.2889 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 16:09:13.693 -05:00 INF] HTTP GET /health responded 307 in 0.0348 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 16:09:13.732 -05:00 INF] HTTP GET /health responded 200 in 0.2603 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 16:09:43.701 -05:00 INF] HTTP GET /health responded 307 in 0.0874 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 16:09:43.710 -05:00 INF] HTTP GET /health responded 200 in 0.5158 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 16:10:13.708 -05:00 INF] HTTP GET /health responded 307 in 0.0686 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 16:10:13.753 -05:00 INF] HTTP GET /health responded 200 in 0.3513 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 16:11:12.531 -05:00 INF] HTTP GET /health responded 307 in 0.0352 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 16:16:13.090 -05:00 INF] HTTP GET /health responded 307 in 0.0561 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
[2025-08-08 16:20:15.077 -05:00 INF] HTTP GET /health responded 200 in 0.2741 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
