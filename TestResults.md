2025-08-17 18:55:41.313 | [23:55:41 WRN] üîç LOGIN DEBUG: Starting login for mccrearyforward@gmail.com {"SourceContext": "AuthService.Services.AuthServiceImplementation", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:41.393 | [23:55:41 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. {"EventId": {"Id": 20504, "Name": "Microsoft.EntityFrameworkCore.Query.MultipleCollectionIncludeWarning"}, "SourceContext": "Microsoft.EntityFrameworkCore.Query", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:41.547 | [23:55:41 WRN] üîç LOGIN DEBUG: User found: True, IsActive: True, TenantId: 1 {"SourceContext": "AuthService.Services.AuthServiceImplementation", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:41.547 | [23:55:41 WRN] üîç LOGIN DEBUG: Attempting password verification for mccrearyforward@gmail.com {"SourceContext": "AuthService.Services.AuthServiceImplementation", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:41.547 | [23:55:41 WRN] üîç LOGIN DEBUG: Password length: 11, Hash starts with: $2a$12$FoF {"SourceContext": "AuthService.Services.AuthServiceImplementation", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.291 | [23:55:42 WRN] üîç LOGIN DEBUG: Password verification result: True {"SourceContext": "AuthService.Services.AuthServiceImplementation", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.291 | [23:55:42 WRN] üîç LOGIN DEBUG: Checking tenant relationship. PrimaryTenant: True, TenantId: 1 {"SourceContext": "AuthService.Services.AuthServiceImplementation", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.311 | [23:55:42 WRN] Could not resolve tenant from any source. Strategy: Header, IsAuthenticated: False {"SourceContext": "Common.Services.TenantProvider", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.312 | [23:55:42 WRN] Failed to resolve tenant ID from any source {"SourceContext": "Common.Services.TenantProvider", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.318 | [23:55:42 INF] üîç JWT: Found 0 active roles for user 6 in tenant 1 {"SourceContext": "AuthService.Services.EnhancedTokenService", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.319 | [23:55:42 WRN] üîç JWT: No UserRoles found for user 6, falling back to TenantUsers {"SourceContext": "AuthService.Services.EnhancedTokenService", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.319 | [23:55:42 INF] üîç JWT: Added legacy role claim 'User' from TenantUsers for user 6 {"SourceContext": "AuthService.Services.EnhancedTokenService", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.321 | [23:55:42 INF] üîç PERMISSION DEBUG: Getting permissions for user 6 in tenant 1 {"SourceContext": "Common.Services.PermissionService", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.325 | [23:55:42 WRN] Could not resolve tenant from any source. Strategy: Header, IsAuthenticated: False {"SourceContext": "Common.Services.TenantProvider", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.325 | [23:55:42 WRN] Failed to resolve tenant ID from any source {"SourceContext": "Common.Services.TenantProvider", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.328 | [23:55:42 INF] üîç PERMISSION DEBUG: Found 0 active user roles for user 6 in tenant 1:  {"SourceContext": "Common.Services.PermissionService", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.328 | [23:55:42 WRN] üîç PERMISSION DEBUG: No active user roles found for user 6 in tenant 1 {"SourceContext": "Common.Services.PermissionService", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.328 | [23:55:42 INF] üîç JWT: Added 0 permissions to JWT for user 6 in tenant 1 {"SourceContext": "AuthService.Services.EnhancedTokenService", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.331 | [23:55:42 INF] üîç JWT: Generated token for user 6 with 1 roles and 0 permissions {"SourceContext": "AuthService.Services.EnhancedTokenService", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.355 | [23:55:42 WRN] Could not resolve tenant from any source. Strategy: Header, IsAuthenticated: False {"SourceContext": "Common.Services.TenantProvider", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.355 | [23:55:42 WRN] Failed to resolve tenant ID from any source {"SourceContext": "Common.Services.TenantProvider", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.450 | [23:55:42 INF] User mccrearyforward@gmail.com logged in successfully {"SourceContext": "AuthService.Services.AuthServiceImplementation", "ActionId": "b307dadc-dd62-4bb2-9d96-5d1111b6fa8c", "ActionName": "AuthService.Controllers.AuthController.Login (AuthService)", "RequestId": "0HNETT5KSQSP0:00000001", "RequestPath": "/api/auth/login", "ConnectionId": "0HNETT5KSQSP0"}
2025-08-17 18:55:42.464 | [23:55:42 INF] HTTP POST /api/auth/login responded 200 in 1183.8916 ms {"SourceContext": "Serilog.AspNetCore.RequestLoggingMiddleware"}
